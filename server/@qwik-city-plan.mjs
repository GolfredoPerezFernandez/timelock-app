import{c as B,i as f,u as g,b as Le,d as h,e,f as u,S as ye,g as S,h as b,r as V,j as F,k as ze,l as t,L as Q,m as ae,n as _,o as N,p as U,F as O,z as X,q as be,s as ke,t as Ol}from"./q-CGSzV7xe.js";import{createClient as Ce}from"@libsql/client";import Ve from"path";import je from"fs";import{readFile as Pl,mkdir as He,writeFile as Re}from"node:fs/promises";import xe,{join as ce}from"node:path";import{randomBytes as Ge}from"node:crypto";import{z as E}from"zod";import{createWalletClient as Xe,custom as We,createPublicClient as jl,http as Fl,parseUnits as Fe}from"viem";import{base as $l}from"viem/chains";const ql=()=>{const l=g(!1);return Le(h("s_kMIkvtDqkEU",[l])),e("div",null,{class:"min-h-screen flex flex-col items-center justify-center transition-colors duration-300 bg-transparent",style:{paddingTop:"calc(env(safe-area-inset-top))"}},[e("div",null,{class:"fixed inset-0 pointer-events-none overflow-hidden opacity-40"},[e("div",null,{class:"w-20 h-20 bg-teal-500/20 rounded-full absolute top-[10%] left-[15%] animate-[float_15s_infinite]"},null,3,null),e("div",null,{class:"w-32 h-32 bg-slate-500/20 rounded-full absolute top-[30%] left-[65%] animate-[float_18s_infinite]",style:"animation-delay: 0.5s;"},null,3,null),e("div",null,{class:"w-16 h-16 bg-amber-400/20 rounded-full absolute top-[70%] left-[25%] animate-[float_12s_infinite]",style:"animation-delay: 1s;"},null,3,null)],3,null),e("div",null,{class:"pt-safe"},u(ye,null,3,"GY_0"),1,null),e("style",null,null,`
        @keyframes float {
          0% { transform: translate(0, 0); }
          25% { transform: translate(5px, -15px); }
          50% { transform: translate(10px, 0); }
          75% { transform: translate(5px, 15px); }
          100% { transform: translate(0, 0); }
        }
        @keyframes pulse {
          0%, 100% { opacity: 0.5; transform: scale(1); }
          50% { opacity: 1; transform: scale(1.05); }
        }
      `,3,null)],1,"GY_1")},Bl=B(f(ql,"s_9ToU0mvTu94")),Yl=Object.freeze(Object.defineProperty({__proto__:null,default:Bl},Symbol.toStringTag,{value:"Module"})),Y=async l=>{var i,o;const s=(i=l.cookie.get("auth_token"))==null?void 0:i.value,n=(o=l.cookie.get("user_type"))==null?void 0:o.value;if(!s||!n)return{isAuthenticated:!1,userId:null,role:null,is_admin:!1};let r=!1,a=n;try{const m=await Ce({url:l.env.get("PRIVATE_TURSO_DATABASE_URL"),authToken:l.env.get("PRIVATE_TURSO_AUTH_TOKEN")}).execute({sql:"SELECT email, type FROM users WHERE id = ?",args:[s]});if(m.rows.length===0)return Ae(l),{isAuthenticated:!1,userId:null,role:null,is_admin:!1};m.rows[0].email==="admin@gmail.com"?(r=!0,a="admin"):(r=!1,(n==="admin"||n==="super_admin")&&(a="freelancer"))}catch(d){return console.error("Session validation DB error:",d),{isAuthenticated:!1,userId:null,role:null,is_admin:!1}}return{isAuthenticated:!0,userId:s,role:a,is_admin:r}};function Ke(l){return new TextEncoder().encode(l)}function re(l){return Array.from(new Uint8Array(l)).map(s=>s.toString(16).padStart(2,"0")).join("")}async function zl(l){const s=Ke(l),n=crypto.getRandomValues(new Uint8Array(16)),r=await crypto.subtle.importKey("raw",s,{name:"PBKDF2"},!1,["deriveBits"]),a=await crypto.subtle.deriveBits({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},r,256),i=new Uint8Array(n.length+32);i.set(n),i.set(new Uint8Array(a),n.length);const o=re(i);return console.log("[hashPassword] password:",l),console.log("[hashPassword] salt:",re(n)),console.log("[hashPassword] derivedKey:",re(a)),console.log("[hashPassword] combined hex:",o),o}async function Vl(l,s){const n=new Uint8Array(s.match(/.{1,2}/g).map(x=>parseInt(x,16))),r=n.slice(0,16),a=n.slice(16),i=Ke(l),o=await crypto.subtle.importKey("raw",i,{name:"PBKDF2"},!1,["deriveBits"]),d=await crypto.subtle.deriveBits({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},o,256),m=re(d),c=re(a);return console.log("[verifyPassword] password:",l),console.log("[verifyPassword] salt:",re(r)),console.log("[verifyPassword] derivedKey:",m),console.log("[verifyPassword] storedKey:",c),m===c}const Qe=(l,s,n)=>{const r=String(s),a={path:"/",httpOnly:!0,sameSite:"strict",secure:l.url.protocol==="https:",maxAge:2592e3};l.cookie.set("auth_token",r,a),l.cookie.set("user_type",n,a)},Ae=l=>{const s={path:"/"};l.cookie.delete("auth_token",s),l.cookie.delete("user_type",s)},Hl=l=>S("svg",{...l,children:[e("circle",null,{cx:"12",cy:"12",r:"10"},null,3,null),e("line",null,{x1:"12",x2:"12",y1:"8",y2:"12"},null,3,null),e("line",null,{x1:"12",x2:"12.01",y1:"16",y2:"16"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Ui_0"),W=l=>S("svg",{...l,children:[e("path",null,{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"},null,3,null),e("path",null,{d:"M12 9v4"},null,3,null),e("path",null,{d:"M12 17h.01"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"zY_0"),$e=l=>S("svg",{...l,children:[e("path",null,{d:"m12 19-7-7 7-7"},null,3,null),e("path",null,{d:"M19 12H5"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"VY_0"),ve=l=>S("svg",{...l,children:[e("rect",null,{height:"14",rx:"2",ry:"2",width:"20",x:"2",y:"7"},null,3,null),e("path",null,{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"sZ_0"),Gl=l=>S("svg",{...l,children:[e("rect",null,{height:"20",rx:"2",ry:"2",width:"16",x:"4",y:"2"},null,3,null),e("path",null,{d:"M9 22v-4h6v4"},null,3,null),e("path",null,{d:"M8 6h.01"},null,3,null),e("path",null,{d:"M16 6h.01"},null,3,null),e("path",null,{d:"M12 6h.01"},null,3,null),e("path",null,{d:"M12 10h.01"},null,3,null),e("path",null,{d:"M12 14h.01"},null,3,null),e("path",null,{d:"M16 10h.01"},null,3,null),e("path",null,{d:"M16 14h.01"},null,3,null),e("path",null,{d:"M8 10h.01"},null,3,null),e("path",null,{d:"M8 14h.01"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"t9_0"),Ne=l=>S("svg",{...l,children:[e("rect",null,{height:"18",rx:"2",ry:"2",width:"18",x:"3",y:"4"},null,3,null),e("line",null,{x1:"16",x2:"16",y1:"2",y2:"6"},null,3,null),e("line",null,{x1:"8",x2:"8",y1:"2",y2:"6"},null,3,null),e("line",null,{x1:"3",x2:"21",y1:"10",y2:"10"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"34_0"),ue=l=>S("svg",{...l,children:[e("path",null,{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,3,null),e("polyline",null,{points:"22 4 12 14.01 9 11.01"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Jy_0"),Ie=l=>S("svg",{...l,children:e("path",null,{d:"m15 18-6-6 6-6"},null,3,null)},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"5O_0"),Me=l=>S("svg",{...l,children:e("path",null,{d:"m9 18 6-6-6-6"},null,3,null)},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Rc_0"),me=l=>S("svg",{...l,children:[e("circle",null,{cx:"12",cy:"12",r:"10"},null,3,null),e("polyline",null,{points:"12 6 12 12 16 14"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"PM_0"),Xl=l=>S("svg",{...l,children:[e("rect",null,{height:"14",rx:"2",width:"20",x:"2",y:"5"},null,3,null),e("line",null,{x1:"2",x2:"22",y1:"10",y2:"10"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"UR_0"),Wl=l=>S("svg",{...l,children:[e("line",null,{x1:"12",x2:"12",y1:"2",y2:"22"},null,3,null),e("path",null,{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"0T_0"),Ze=l=>S("svg",{...l,children:[e("path",null,{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},null,3,null),e("polyline",null,{points:"7 10 12 15 17 10"},null,3,null),e("line",null,{x1:"12",x2:"12",y1:"15",y2:"3"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"f4_0"),Je=l=>S("svg",{...l,children:[e("path",null,{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"},null,3,null),e("polyline",null,{points:"15 3 21 3 21 9"},null,3,null),e("line",null,{x1:"10",x2:"21",y1:"14",y2:"3"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Oq_0"),de=l=>S("svg",{...l,children:[e("path",null,{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"},null,3,null),e("circle",null,{cx:"12",cy:"12",r:"3"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"jA_0"),Z=l=>S("svg",{...l,children:[e("path",null,{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"},null,3,null),e("polyline",null,{points:"14 2 14 8 20 8"},null,3,null),e("line",null,{x1:"16",x2:"8",y1:"13",y2:"13"},null,3,null),e("line",null,{x1:"16",x2:"8",y1:"17",y2:"17"},null,3,null),e("line",null,{x1:"10",x2:"8",y1:"9",y2:"9"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"gd_0"),el=l=>S("svg",{...l,children:[e("path",null,{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"},null,3,null),e("polyline",null,{points:"14 2 14 8 20 8"},null,3,null),e("path",null,{d:"M12 12v6"},null,3,null),e("path",null,{d:"m15 15-3-3-3 3"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Wk_0"),De=l=>S("svg",{...l,children:e("polygon",null,{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},null,3,null)},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"bo_0"),qe=l=>S("svg",{...l,children:[e("circle",null,{cx:"7.5",cy:"15.5",r:"5.5"},null,3,null),e("path",null,{d:"m21 2-9.6 9.6"},null,3,null),e("path",null,{d:"m15.5 7.5 3 3L22 7l-3-3"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Wf_0"),G=l=>S("svg",{...l,children:e("path",null,{d:"M21 12a9 9 0 1 1-6.219-8.56"},null,3,null)},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"nT_0"),ge=l=>S("svg",{...l,children:[e("line",null,{x1:"12",x2:"12",y1:"2",y2:"6"},null,3,null),e("line",null,{x1:"12",x2:"12",y1:"18",y2:"22"},null,3,null),e("line",null,{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76"},null,3,null),e("line",null,{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07"},null,3,null),e("line",null,{x1:"2",x2:"6",y1:"12",y2:"12"},null,3,null),e("line",null,{x1:"18",x2:"22",y1:"12",y2:"12"},null,3,null),e("line",null,{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24"},null,3,null),e("line",null,{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"kT_0"),ne=l=>S("svg",{...l,children:[e("rect",null,{height:"11",rx:"2",ry:"2",width:"18",x:"3",y:"11"},null,3,null),e("path",null,{d:"M7 11V7a5 5 0 0 1 10 0v4"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"WS_0"),ll=l=>S("svg",{...l,children:[e("path",null,{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},null,3,null),e("polyline",null,{points:"16 17 21 12 16 7"},null,3,null),e("line",null,{x1:"21",x2:"9",y1:"12",y2:"12"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"0h_0"),Kl=l=>S("svg",{...l,children:[e("rect",null,{height:"16",rx:"2",width:"20",x:"2",y:"4"},null,3,null),e("path",null,{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"n4_0"),Ql=l=>S("svg",{...l,children:[e("line",null,{x1:"4",x2:"20",y1:"12",y2:"12"},null,3,null),e("line",null,{x1:"4",x2:"20",y1:"6",y2:"6"},null,3,null),e("line",null,{x1:"4",x2:"20",y1:"18",y2:"18"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"f1_0"),Zl=l=>S("svg",{...l,children:e("path",null,{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"},null,3,null)},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Oe_0"),Jl=l=>S("svg",{...l,children:[e("circle",null,{cx:"13.5",cy:"6.5",r:".5"},null,3,null),e("circle",null,{cx:"17.5",cy:"10.5",r:".5"},null,3,null),e("circle",null,{cx:"8.5",cy:"7.5",r:".5"},null,3,null),e("circle",null,{cx:"6.5",cy:"12.5",r:".5"},null,3,null),e("path",null,{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"60_0"),Ue=l=>S("svg",{...l,children:[e("path",null,{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"},null,3,null),e("path",null,{d:"m15 5 4 4"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"eG_0"),et=l=>S("svg",{...l,children:[e("path",null,{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},null,3,null),e("path",null,{d:"M22 12A10 10 0 0 0 12 2v10z"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"HH_0"),oe=l=>S("svg",{...l,children:[e("path",null,{d:"M5 12h14"},null,3,null),e("path",null,{d:"M12 5v14"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Z7_0"),lt=l=>S("svg",{...l,children:[e("path",null,{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"},null,3,null),e("path",null,{d:"M3 3v5h5"},null,3,null),e("path",null,{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"},null,3,null),e("path",null,{d:"M16 16h5v5"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"CE_0"),ee=l=>S("svg",{...l,children:[e("path",null,{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},null,3,null),e("polyline",null,{points:"17 21 17 13 7 13 7 21"},null,3,null),e("polyline",null,{points:"7 3 7 8 15 8"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Jw_0"),Oe=l=>S("svg",{...l,children:[e("circle",null,{cx:"11",cy:"11",r:"8"},null,3,null),e("path",null,{d:"m21 21-4.3-4.3"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"OE_0"),tl=l=>S("svg",{...l,children:[e("path",null,{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"},null,3,null),e("circle",null,{cx:"12",cy:"12",r:"3"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"xG_0"),tt=l=>S("svg",{...l,children:[e("path",null,{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"},null,3,null),e("path",null,{d:"m9 12 2 2 4-4"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"oN_0"),st=l=>S("svg",{...l,children:[e("path",null,{d:"M19.7 14a6.9 6.9 0 0 0 .3-2V5l-8-3-3.2 1.2"},null,3,null),e("path",null,{d:"m2 2 20 20"},null,3,null),e("path",null,{d:"M4.7 4.7 4 5v7c0 6 8 10 8 10a20.3 20.3 0 0 0 5.62-4.38"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Ij_0"),at=l=>S("svg",{...l,children:[e("circle",null,{cx:"12",cy:"12",r:"4"},null,3,null),e("path",null,{d:"M12 2v2"},null,3,null),e("path",null,{d:"M12 20v2"},null,3,null),e("path",null,{d:"m4.93 4.93 1.41 1.41"},null,3,null),e("path",null,{d:"m17.66 17.66 1.41 1.41"},null,3,null),e("path",null,{d:"M2 12h2"},null,3,null),e("path",null,{d:"M20 12h2"},null,3,null),e("path",null,{d:"m6.34 17.66-1.41 1.41"},null,3,null),e("path",null,{d:"m19.07 4.93-1.41 1.41"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Qm_0"),sl=l=>S("svg",{...l,children:[e("path",null,{d:"M3 6h18"},null,3,null),e("path",null,{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"},null,3,null),e("path",null,{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"},null,3,null),e("line",null,{x1:"10",x2:"10",y1:"11",y2:"17"},null,3,null),e("line",null,{x1:"14",x2:"14",y1:"11",y2:"17"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"Eb_0"),pe=l=>S("svg",{...l,children:[e("path",null,{d:"M3 6h18"},null,3,null),e("path",null,{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"},null,3,null),e("path",null,{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"St_0"),nt=l=>S("svg",{...l,children:[e("path",null,{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"},null,3,null),e("circle",null,{cx:"12",cy:"7",r:"4"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"sX_0"),J=l=>S("svg",{...l,children:[e("path",null,{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},null,3,null),e("circle",null,{cx:"9",cy:"7",r:"4"},null,3,null),e("path",null,{d:"M22 21v-2a4 4 0 0 0-3-3.87"},null,3,null),e("path",null,{d:"M16 3.13a4 4 0 0 1 0 7.75"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"pI_0"),rt=l=>S("svg",{...l,children:[e("path",null,{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4"},null,3,null),e("path",null,{d:"M3 5v14a2 2 0 0 0 2 2h16v-5"},null,3,null),e("path",null,{d:"M18 12a2 2 0 0 0 0 4h4v-4Z"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"lt_0"),le=l=>S("svg",{...l,children:[e("path",null,{d:"M18 6 6 18"},null,3,null),e("path",null,{d:"m6 6 12 12"},null,3,null)]},{"data-qwikest-icon":!0,fill:"none",height:"1em",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg"},0,"CN_0"),ot=l=>{const s={xs:{width:24,height:24,text:"text-sm",subtext:"text-xs"},sm:{width:32,height:32,text:"text-lg",subtext:"text-xs"},md:{width:40,height:40,text:"text-xl",subtext:"text-sm"},lg:{width:56,height:56,text:"text-2xl",subtext:"text-base"}},n=l.responsive??!1?{width:"w-6 sm:w-8 md:w-10",height:"h-6 sm:h-8 md:h-10",text:"text-sm sm:text-lg md:text-xl",subtext:"text-xs sm:text-xs md:text-sm"}:null,{width:r,height:a,text:i,subtext:o}=l.responsive??!1?n:s[l.size??"md"];return e("div",null,{class:b(d=>`inline-flex items-center ${d.className??""}`,[l],'`inline-flex items-center ${p0.className??""}`')},[e("div",{style:{width:r,height:a}},null,e("svg",null,{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",class:"w-full h-full"},[e("defs",null,null,e("linearGradient",null,{id:"logoGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%"},[e("stop",null,{offset:"0%",style:{stopColor:"#0f766e",stopOpacity:1}},null,3,null),e("stop",null,{offset:"50%",style:{stopColor:"#14b8a6",stopOpacity:1}},null,3,null),e("stop",null,{offset:"100%",style:{stopColor:"#5eead4",stopOpacity:1}},null,3,null)],3,null),3,null),e("circle",null,{cx:"50",cy:"50",r:"42",fill:"url(#logoGradient)",stroke:"#0f766e","stroke-width":"2"},null,3,null),e("text",null,{x:"50%",y:"50%","dominant-baseline":"central","text-anchor":"middle","font-family":"'Poppins', sans-serif","font-size":"28","font-weight":"bold",fill:"#ffffff","letter-spacing":"-1"},"STL",3,null)],3,null),3,null),e("div",{class:`ml-2 sm:ml-3 font-bold ${l.responsive??!1?n.text:i} flex flex-col leading-none`},null,[e("span",null,{class:"text-slate-800 dark:text-slate-100"},"Saave",3,null),e("span",{class:`text-teal-600 dark:text-teal-400 ${l.responsive??!1?n.subtext:o}`},null,"TimeLock",3,null)],1,null)],1,"2o_0")},it=B(f(ot,"s_jTI0vSQg3mw")),_e=l=>u(it,{...l},0,"S3_0"),ut=async l=>Y(l),al=V(f(ut,"s_kPZv5zqFaP4")),dt=()=>{const[l]=N();l.value=!l.value,l.value?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},ct=()=>{const[l]=N();l.value=!l.value},mt=()=>{const[l]=N();return l.value=!1},pt=()=>{const[l]=N();return l.value=!1},ft=()=>{const[l]=N();return l.value=!1},xt=()=>{F();const l=al(),s=ze(),n=g(!1),r=g(!1),a=g(!0),i=[{name:"Dashboard",href:"/",icon:et,description:"Overview of key metrics",adminOnly:!1},{name:"Professionals",href:"/professionals",icon:J,description:"Manage professional profiles",adminOnly:!1},{name:"Contracts",href:"/contracts",icon:ve,description:"Administer service contracts",adminOnly:!0},{name:"Invoices",href:"/invoices",icon:Z,description:"Track and manage invoices",adminOnly:!1},{name:"Settlements",href:"/settlements",icon:Wl,description:"Process payment settlements",adminOnly:!0},{name:"Planner",href:"/planner",icon:Ne,description:"View payment schedules",adminOnly:!0},{name:"Payment Scheduler",href:"/planner-auto",icon:me,description:"Automate payment schedules",adminOnly:!0},{name:"Settings",href:"/settings",icon:tl,description:"Configure application settings",adminOnly:!0},...l.value.role==="super_admin"?[{name:"User Admin",href:"/user-admin",icon:J,description:"Manage system users",adminOnly:!0}]:[]],o=l.value.isAuthenticated?{name:"Logout",href:"/auth/logout",icon:ll,description:"Sign out of your account"}:{name:"Login",href:"/auth",icon:nt,description:"Access your account"};Le(h("s_PXmMQHEJxdA",[n]));const d=f(dt,"s_gdjDhvPXj4E",[n]),m=f(ct,"s_B99zaGvTXxk",[a]);return s.url.pathname==="/auth/"?e("main",null,{class:"flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto"},u(ye,null,3,"S3_1"),1,"S3_2"):e("div",null,{class:"flex h-screen bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200"},[e("aside",{class:`hidden lg:flex flex-col transition-all duration-300 ease-in-out bg-white dark:bg-slate-800/50 border-r border-slate-200 dark:border-slate-700/50
        ${a.value?"w-64":"w-20"}`},null,[e("div",null,{class:b(c=>`flex items-center h-16 px-4 ${c.value?"justify-between":"justify-center"}`,[a],'`flex items-center h-16 px-4 ${p0.value?"justify-between":"justify-center"}`')},[u(Q,{href:"/",get class(){return`flex items-center gap-2 ${!a.value&&"w-full justify-center"}`},children:[u(_e,{className:"w-8 h-8 text-teal-500",[t]:{className:t}},3,"S3_3"),a.value&&e("span",null,{class:"font-bold text-lg"},"SaveeTimelock",3,"S3_4")],[t]:{href:t,class:b(c=>`flex items-center gap-2 ${!c.value&&"w-full justify-center"}`,[a],'`flex items-center gap-2 ${!p0.value&&"w-full justify-center"}`')}},1,"S3_5"),a.value&&e("button",null,{class:"p-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700",onClick$:m},u(Ie,{class:"w-5 h-5",[t]:{class:t}},3,"S3_6"),1,"S3_7")],1,null),!a.value&&e("div",null,{class:"flex justify-center my-2"},e("button",null,{class:"p-1 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700",onClick$:m},u(Me,{class:"w-5 h-5",[t]:{class:t}},3,"S3_8"),1,null),1,"S3_9"),e("nav",null,{class:"flex-1 px-2 py-4 space-y-2"},i.map(c=>{if(c.adminOnly&&l.value.role==="freelancer")return null;const x=s.url.pathname===c.href||c.href!=="/"&&s.url.pathname.startsWith(c.href);return u(Q,{get href(){return c.href},get title(){return c.name},class:`flex items-center gap-3 rounded-md transition-colors
                ${a.value?"px-3 py-2":"p-3 justify-center"}
                ${x?"bg-teal-500/10 text-teal-500 dark:bg-teal-400/20 dark:text-teal-400":"hover:bg-slate-100 dark:hover:bg-slate-700/50"}`,children:[u(c.icon,{class:"w-5 h-5 shrink-0",[t]:{class:t}},3,"S3_10"),a.value&&e("span",null,{class:"text-sm font-medium"},_(c,"name"),1,"S3_11")],[t]:{href:ae(c,"href"),title:ae(c,"name")}},1,c.name)}),1,null),e("div",null,{class:"px-2 py-4 mt-auto"},u(Q,{get href(){return o.href},get title(){return o.name},class:`flex items-center gap-3 rounded-md transition-colors
            ${a.value?"px-3 py-2":"p-3 justify-center"}
            hover:bg-slate-100 dark:hover:bg-slate-700/50`,children:[u(o.icon,{class:"w-5 h-5 shrink-0",[t]:{class:t}},3,"S3_12"),a.value&&e("span",null,{class:"text-sm font-medium"},_(o,"name"),1,"S3_13")],[t]:{href:ae(o,"href"),title:ae(o,"name")}},1,"S3_14"),1,null)],1,null),e("header",null,{class:"lg:hidden fixed top-0 left-0 right-0 z-40 flex items-center justify-between h-16 px-4 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm border-b border-slate-200 dark:border-slate-800"},[e("button",null,{class:"p-2",onClick$:h("s_CqXkyDmMGuc",[r])},u(Ql,{class:"w-6 h-6",[t]:{class:t}},3,"S3_15"),1,null),u(Q,{href:"/",class:"flex items-center gap-2",children:u(_e,{className:"w-8 h-8 text-teal-500",[t]:{className:t}},3,"S3_16"),[t]:{href:t,class:t}},1,"S3_17"),e("button",null,{class:"p-2",onClick$:d},n.value?u(at,{class:"w-6 h-6",[t]:{class:t}},3,"S3_18"):u(Zl,{class:"w-6 h-6",[t]:{class:t}},3,"S3_19"),1,null)],1,null),r.value&&e("div",null,{class:"lg:hidden fixed inset-0 z-50",role:"dialog","aria-modal":"true"},[e("div",null,{class:"fixed inset-0 bg-black/25 backdrop-blur-sm",onClick$:h("s_29h0Cs0YvUk",[r])},null,3,null),e("div",null,{class:"fixed inset-y-0 left-0 w-64 bg-white dark:bg-slate-800 p-4"},[e("div",null,{class:"flex items-center justify-between h-12 mb-4"},[u(Q,{href:"/",class:"flex items-center gap-2",onClick$:f(mt,"s_Lgh2fELhsxw",[r]),children:e("span",null,{class:"font-bold text-lg"},"SaveeTimelock",3,null),[t]:{href:t,class:t,onClick$:t}},3,"S3_20"),e("button",null,{class:"p-2",onClick$:h("s_tUdpu55U93Q",[r])},u(le,{class:"w-6 h-6",[t]:{class:t}},3,"S3_21"),1,null)],1,null),e("nav",null,{class:"flex flex-col h-full"},[e("div",null,{class:"flex-1 space-y-2"},i.map(c=>{if(c.adminOnly&&l.value.role==="freelancer")return null;const x=s.url.pathname===c.href||c.href!=="/"&&s.url.pathname.startsWith(c.href);return u(Q,{get href(){return c.href},onClick$:f(pt,"s_rHbc3bvvZ1E",[r]),class:`flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium
                      ${x?"bg-teal-500/10 text-teal-500 dark:bg-teal-400/20 dark:text-teal-400":"hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[u(c.icon,{class:"w-5 h-5",[t]:{class:t}},3,"S3_22"),_(c,"name")],[t]:{href:ae(c,"href"),onClick$:t}},1,c.name)}),1,null),e("div",null,{class:"mt-auto"},u(Q,{get href(){return o.href},onClick$:f(ft,"s_NhVnMTaOGeI",[r]),class:"flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium hover:bg-slate-100 dark:hover:bg-slate-700",children:[u(o.icon,{class:"w-5 h-5",[t]:{class:t}},3,"S3_23"),_(o,"name")],[t]:{href:ae(o,"href"),onClick$:t,class:t}},1,"S3_24"),1,null)],1,null)],1,null)],1,"S3_25"),e("main",null,{class:"flex-1 overflow-y-auto pt-16 lg:pt-0"},e("div",null,{class:"p-4 sm:p-6 lg:p-8"},u(ye,null,3,"S3_26"),1,null),1,null)],1,"S3_27")},gt=B(f(xt,"s_7u8M1ps3cz0")),ht=Object.freeze(Object.defineProperty({__proto__:null,Logo:_e,default:gt,useAuthSession:al},Symbol.toStringTag,{value:"Module"}));Ce({url:process.env.PRIVATE_TURSO_DATABASE_URL||"file:./local.db",authToken:process.env.PRIVATE_TURSO_AUTH_TOKEN});function I(l){var r,a;const s=(r=l.env.get("PRIVATE_TURSO_DATABASE_URL"))==null?void 0:r.trim();if(s===void 0)throw new Error("PRIVATE_TURSO_DATABASE_URL is not defined");const n=(a=l.env.get("PRIVATE_TURSO_AUTH_TOKEN"))==null?void 0:a.trim();if(n===void 0&&!s.includes("file:"))throw new Error("PRIVATE_TURSO_AUTH_TOKEN is not defined");return Ce({url:s,authToken:n})}async function we(l){const s=I(l),n=await s.execute("PRAGMA table_info(professionals);"),r=n.rows.find(o=>o.name==="wallet"),a=n.rows.find(o=>o.name==="user_id");(r&&r.notnull===1||a&&a.notnull===1)&&(await s.execute("BEGIN TRANSACTION;"),await s.execute(`
      CREATE TABLE IF NOT EXISTS professionals_tmp (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        user_id INTEGER,
        name TEXT NOT NULL,
        role TEXT NOT NULL,
        email TEXT,
        phone TEXT,
        wallet TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        FOREIGN KEY (user_id) REFERENCES users(id)
      );
    `),await s.execute(`
      INSERT INTO professionals_tmp (id, user_id, name, role, email, phone, wallet, created_at)
      SELECT id, user_id, name, role, email, phone, wallet, created_at FROM professionals;
    `),await s.execute("DROP TABLE professionals;"),await s.execute("ALTER TABLE professionals_tmp RENAME TO professionals;"),await s.execute("COMMIT;")),console.log("Running database migrations for users and trees tables..."),await s.execute(`CREATE TABLE IF NOT EXISTS users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    email TEXT NOT NULL UNIQUE,
    password_hash TEXT NOT NULL,
    username TEXT NOT NULL DEFAULT '',
    type TEXT DEFAULT 'normal',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    session_expires DATETIME
  );`);try{await s.execute("ALTER TABLE users ADD COLUMN email TEXT;")}catch(o){if(!String(o.message).toLowerCase().includes("duplicate column name"))throw o}try{await s.execute("ALTER TABLE users ADD COLUMN type TEXT DEFAULT 'normal';")}catch(o){if(!String(o.message).toLowerCase().includes("duplicate column name"))throw o}try{await s.execute("ALTER TABLE users ADD COLUMN username TEXT NOT NULL DEFAULT '';")}catch(o){if(!String(o.message).toLowerCase().includes("duplicate column name"))throw o}try{await s.execute("ALTER TABLE users ADD COLUMN session_expires DATETIME;")}catch(o){if(!String(o.message).toLowerCase().includes("duplicate column name"))throw o}await s.execute("CREATE UNIQUE INDEX IF NOT EXISTS idx_users_email ON users(email);"),await s.execute(`CREATE TABLE IF NOT EXISTS professionals (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    name TEXT NOT NULL,
    role TEXT NOT NULL,
    email TEXT,
    phone TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
  );`);try{await s.execute("ALTER TABLE professionals ADD COLUMN email TEXT;")}catch(o){if(!String(o.message).toLowerCase().includes("duplicate column name"))throw o}try{await s.execute("ALTER TABLE professionals ADD COLUMN phone TEXT;")}catch(o){if(!String(o.message).toLowerCase().includes("duplicate column name"))throw o}try{await s.execute("ALTER TABLE professionals ADD COLUMN wallet TEXT;")}catch(o){if(!String(o.message).toLowerCase().includes("duplicate column name"))throw o}await s.execute(`CREATE TABLE IF NOT EXISTS contracts (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    professional_id INTEGER NOT NULL,
    user_id INTEGER NOT NULL,
    start_date TEXT NOT NULL,
    end_date TEXT NOT NULL,
    status TEXT NOT NULL DEFAULT 'pending',
    contract_pdf_url TEXT,
    contract_url TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (professional_id) REFERENCES professionals(id),
    FOREIGN KEY (user_id) REFERENCES users(id)
  );`);try{await s.execute("ALTER TABLE contracts ADD COLUMN contract_url TEXT;")}catch(o){if(!String(o.message).toLowerCase().includes("duplicate column name"))throw o}await s.execute(`CREATE TABLE IF NOT EXISTS invoices (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    contract_id INTEGER NOT NULL,
    professional_id INTEGER NOT NULL,
    user_id INTEGER NOT NULL,
    issue_date TEXT NOT NULL,
    paid_date TEXT,
    amount REAL NOT NULL,
    currency TEXT NOT NULL,
    status TEXT NOT NULL CHECK(status IN ('pending', 'paid')),
    invoice_url TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (contract_id) REFERENCES contracts(id),
    FOREIGN KEY (professional_id) REFERENCES professionals(id),
    FOREIGN KEY (user_id) REFERENCES users(id)
  );`),await s.execute(`CREATE TABLE IF NOT EXISTS settlements (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    professional_id INTEGER NOT NULL,
    user_id INTEGER NOT NULL,
    month INTEGER NOT NULL,
    year INTEGER NOT NULL,
    total_amount REAL NOT NULL,
    total_in_knrt REAL,
    currency TEXT NOT NULL,
    status TEXT NOT NULL CHECK(status IN ('pending', 'paid')),
    payment_date TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (professional_id) REFERENCES professionals(id),
    FOREIGN KEY (user_id) REFERENCES users(id)
  );`);try{await s.execute("ALTER TABLE settlements ADD COLUMN total_in_knrt REAL;")}catch(o){if(!String(o.message).toLowerCase().includes("duplicate column name"))throw o}await s.execute(`CREATE TABLE IF NOT EXISTS payments (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      professional_id INTEGER NOT NULL,
      user_id INTEGER NOT NULL,
      invoice_id INTEGER,
      amount REAL NOT NULL,
      currency TEXT NOT NULL,
      status TEXT NOT NULL CHECK(status IN ('pending', 'paid')),
      due_date TEXT NOT NULL,
      payment_date TEXT,
      description TEXT,
      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (professional_id) REFERENCES professionals(id),
      FOREIGN KEY (user_id) REFERENCES users(id),
      FOREIGN KEY (invoice_id) REFERENCES invoices(id)
  );`),await s.execute(`CREATE TABLE IF NOT EXISTS app_settings (
    id INTEGER PRIMARY KEY CHECK (id = 1),
    company_name TEXT NOT NULL DEFAULT 'Mi Empresa',
    company_email TEXT NOT NULL DEFAULT 'info@miempresa.com',
    company_logo_url TEXT,
    invoice_prefix TEXT NOT NULL DEFAULT 'INV-',
    default_currency TEXT NOT NULL DEFAULT 'USD',
    payment_methods TEXT NOT NULL DEFAULT '["bank_transfer","paypal","wise","crypto"]',
    notifications_enabled BOOLEAN NOT NULL DEFAULT 1,
    theme TEXT NOT NULL DEFAULT 'system',
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
  )`),(await s.execute("SELECT COUNT(*) as count FROM app_settings WHERE id = 1")).rows[0].count===0&&await s.execute("INSERT INTO app_settings (id) VALUES (1)")}const bt=async l=>{var n,r,a,i,o,d;await we(l);const s=I(l);try{const m=await s.execute("SELECT COUNT(*) as count FROM professionals"),c=await s.execute("SELECT COUNT(*) as count FROM contracts WHERE status = 'active'"),x=await s.execute("SELECT COUNT(*) as count, SUM(amount) as total FROM invoices WHERE status = 'pending'"),v=await s.execute({sql:`
        SELECT COUNT(*) as count 
        FROM payments 
        WHERE status = 'scheduled' AND payment_date BETWEEN date('now') AND date('now', '+7 days')
      `,args:[]}),C=await s.execute("SELECT SUM(total_in_knrt) as total FROM settlements WHERE status = 'paid'"),R=await s.execute({sql:`
        SELECT id, name, role, created_at 
        FROM professionals 
        ORDER BY created_at DESC 
        LIMIT 5
      `,args:[]}),w=await s.execute({sql:`
        SELECT 
          i.id, 
          i.amount, 
          i.currency, 
          i.status, 
          i.issue_date, 
          p.name as professional_name 
        FROM invoices i
        JOIN professionals p ON i.professional_id = p.id
        ORDER BY i.created_at DESC 
        LIMIT 5
      `,args:[]});return{professionals:((n=m.rows[0])==null?void 0:n.count)||0,activeContracts:((r=c.rows[0])==null?void 0:r.count)||0,pendingInvoices:{count:((a=x.rows[0])==null?void 0:a.count)||0,total:((i=x.rows[0])==null?void 0:i.total)||0},upcomingPayments:((o=v.rows[0])==null?void 0:o.count)||0,totalSettled:((d=C.rows[0])==null?void 0:d.total)||0,recentProfessionals:R.rows||[],recentInvoices:w.rows||[]}}catch(m){return console.error("Dashboard data loading error:",m),{professionals:0,activeContracts:0,pendingInvoices:{count:0,total:0},upcomingPayments:0,totalSettled:0,recentProfessionals:[],recentInvoices:[]}}},nl=V(f(bt,"s_FQa6Zhzh4t0")),vt=(l,s="USD")=>{const n=s==="KNRT",r=n?"USD":s,a=new Intl.NumberFormat("en-US",{style:"currency",currency:r,minimumFractionDigits:2,maximumFractionDigits:2}).format(l);return n?`${a} KNRT`:a},wt=()=>{var a,i;F();const l=nl();ze();const s=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),n=f(vt,"s_W1w5p9RjLGU"),r={totalProfessionals:Number(l.value.professionals)||0,activeContracts:Number(l.value.activeContracts)||0,pendingInvoices:Number((a=l.value.pendingInvoices)==null?void 0:a.count)||0,upcomingPayments:Number(l.value.upcomingPayments)||0,totalSettled:Number(l.value.totalSettled)||0,pendingAmount:Number((i=l.value.pendingInvoices)==null?void 0:i.total)||0};return e("div",null,{class:"min-h-screen bg-white dark:bg-slate-900 flex flex-col"},e("div",null,{class:"container mx-auto px-4 py-8 flex-1 flex flex-col"},[e("header",null,{class:"mb-8 bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-800 dark:to-slate-700 rounded-xl shadow-sm p-6"},[e("h1",null,{class:"text-2xl md:text-3xl font-bold mb-2 text-slate-800 dark:text-slate-100"},"Dashboard",3,null),e("p",null,{class:"text-sm md:text-base text-slate-500 dark:text-slate-400"},s,1,null)],1,null),e("div",null,{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},[e("div",null,{class:"bg-white dark:bg-slate-800 rounded-xl shadow-elegant p-6 border border-slate-100 dark:border-slate-700 transition-all hover:shadow-elegant-lg"},e("div",null,{class:"flex justify-between items-center"},[e("div",null,null,[e("p",null,{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Total Professionals",3,null),e("p",null,{class:"text-2xl font-bold mt-1 text-slate-800 dark:text-slate-100"},_(r,"totalProfessionals"),1,null)],1,null),e("div",null,{class:"w-12 h-12 rounded-full bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-600 flex items-center justify-center text-slate-700 dark:text-slate-300 shadow-sm"},u(J,{class:"w-6 h-6",[t]:{class:t}},3,"Pz_0"),1,null)],1,null),1,null),e("div",null,{class:"bg-white dark:bg-slate-800 rounded-xl shadow-elegant p-6 border border-slate-100 dark:border-slate-700 transition-all hover:shadow-elegant-lg"},e("div",null,{class:"flex justify-between items-center"},[e("div",null,null,[e("p",null,{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Active Contracts",3,null),e("p",null,{class:"text-2xl font-bold mt-1 text-slate-800 dark:text-slate-100"},_(r,"activeContracts"),1,null)],1,null),e("div",null,{class:"w-12 h-12 rounded-full bg-gradient-to-br from-teal-100 to-teal-200 dark:from-teal-800/30 dark:to-teal-700/30 flex items-center justify-center text-teal-600 dark:text-teal-400 shadow-sm"},u(ve,{class:"w-6 h-6",[t]:{class:t}},3,"Pz_1"),1,null)],1,null),1,null),e("div",null,{class:"bg-white dark:bg-slate-800 rounded-xl shadow-elegant p-6 border border-slate-100 dark:border-slate-700 transition-all hover:shadow-elegant-lg"},e("div",null,{class:"flex justify-between items-center"},[e("div",null,null,[e("p",null,{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Pending Invoices",3,null),e("p",null,{class:"text-2xl font-bold mt-1 text-slate-800 dark:text-slate-100"},_(r,"pendingInvoices"),1,null)],1,null),e("div",null,{class:"w-12 h-12 rounded-full bg-gradient-to-br from-amber-100 to-amber-200 dark:from-amber-800/30 dark:to-amber-700/30 flex items-center justify-center text-amber-600 dark:text-amber-400 shadow-sm"},u(Z,{class:"w-6 h-6",[t]:{class:t}},3,"Pz_2"),1,null)],1,null),1,null),e("div",null,{class:"bg-white dark:bg-slate-800 rounded-xl shadow-elegant p-6 border border-slate-100 dark:border-slate-700 transition-all hover:shadow-elegant-lg"},e("div",null,{class:"flex justify-between items-center"},[e("div",null,null,[e("p",null,{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Upcoming Payments",3,null),e("p",null,{class:"text-2xl font-bold mt-1 text-slate-800 dark:text-slate-100"},_(r,"upcomingPayments"),1,null)],1,null),e("div",null,{class:"w-12 h-12 rounded-full bg-gradient-to-br from-indigo-100 to-indigo-200 dark:from-indigo-800/30 dark:to-indigo-700/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400 shadow-sm"},u(me,{class:"w-6 h-6",[t]:{class:t}},3,"Pz_3"),1,null)],1,null),1,null)],1,null),e("div",null,{class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},[e("div",null,{class:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-xl shadow-elegant p-6 border border-slate-100 dark:border-slate-700"},[e("div",null,{class:"flex justify-between items-center mb-4"},e("h2",null,{class:"text-lg font-semibold text-slate-800 dark:text-slate-100"},"Financial Summary",3,null),3,null),e("div",null,{class:"grid grid-cols-1 md:grid-cols-2 gap-6"},[e("div",null,null,[e("p",null,{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Total Settled",3,null),e("div",null,{class:"flex items-center mt-2"},e("span",null,{class:"text-2xl font-bold text-slate-800 dark:text-slate-100"},n(r.totalSettled,"KNRT"),1,null),1,null)],1,null),e("div",null,null,[e("p",null,{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Pending Amount",3,null),e("div",null,{class:"flex items-center mt-2"},e("span",null,{class:"text-2xl font-bold text-slate-800 dark:text-slate-100"},n(r.pendingAmount,"KNRT"),1,null),1,null)],1,null)],1,null),e("div",null,{class:"mt-6 bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-700/50 dark:to-slate-800/50 rounded-lg h-48 flex items-center justify-center shadow-elegant-sm"},e("p",null,{class:"text-slate-500 dark:text-slate-400 text-sm font-medium"},"Monthly payments chart",3,null),3,null)],1,null),e("div",null,{class:"bg-white dark:bg-slate-800 rounded-xl shadow-elegant p-6 border border-slate-100 dark:border-slate-700"},[e("div",null,{class:"flex justify-between items-center mb-4"},e("h2",null,{class:"text-lg font-semibold text-slate-800 dark:text-slate-100"},"Recent Professionals",3,null),3,null),e("div",null,{class:"space-y-4"},l.value.recentProfessionals.length>0?l.value.recentProfessionals.map(o=>e("div",null,{class:"flex items-center p-2 hover:bg-slate-50 dark:hover:bg-slate-700/50 rounded-lg transition-colors"},[e("div",null,{class:"w-10 h-10 rounded-full bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-600 flex items-center justify-center text-slate-700 dark:text-slate-300 shadow-sm"},o.name.charAt(0).toUpperCase(),1,null),e("div",null,{class:"ml-3"},[e("p",null,{class:"font-medium text-sm text-slate-800 dark:text-slate-200"},_(o,"name"),1,null),e("p",null,{class:"text-xs text-slate-500 dark:text-slate-400"},_(o,"role"),1,null)],1,null)],1,o.id)):e("div",null,{class:"text-center py-6 text-slate-500 dark:text-slate-400"},[e("div",null,{class:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-slate-100 dark:bg-slate-700/50 mb-3"},u(J,{class:"w-6 h-6 text-slate-400 dark:text-slate-500",[t]:{class:t}},3,"Pz_4"),1,null),e("p",null,null,"No professionals registered",3,null)],1,"Pz_5"),1,null)],1,null)],1,null),e("div",null,{class:"bg-white dark:bg-slate-800 rounded-xl shadow-elegant border border-slate-100 dark:border-slate-700 overflow-hidden"},[e("div",null,{class:"p-6"},e("h2",null,{class:"text-lg font-semibold mb-4 text-slate-800 dark:text-slate-100"},"Recent Invoices",3,null),3,null),e("div",null,{class:"overflow-x-auto"},e("table",null,{class:"w-full"},[e("thead",null,null,e("tr",null,{class:"text-left bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-800"},[e("th",null,{class:"px-6 py-3 text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Professional",3,null),e("th",null,{class:"px-6 py-3 text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Date",3,null),e("th",null,{class:"px-6 py-3 text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Amount",3,null),e("th",null,{class:"px-6 py-3 text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Status",3,null)],3,null),3,null),e("tbody",null,{class:"divide-y divide-gray-200 dark:divide-gray-700"},l.value.recentInvoices.length>0?l.value.recentInvoices.map(o=>e("tr",null,null,[e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},_(o,"professional_name"),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},new Date(o.issue_date).toLocaleDateString(),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm"},[new Intl.NumberFormat("es-ES",{style:"currency",currency:o.currency==="KNRT"?"USD":o.currency}).format(o.amount)," ",o.currency==="KNRT"?"KNRT":""],1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap"},e("span",{class:`inline-flex rounded-full px-2 text-xs font-semibold leading-5 ${o.status==="paid"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"}`},null,o.status==="paid"?"Pagado":"Pendiente",1,null),1,null)],1,o.id)):e("tr",null,null,e("td",null,{colSpan:4,class:"px-6 py-8 text-center text-sm text-slate-500 dark:text-slate-400"},[e("div",null,{class:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-slate-100 dark:bg-slate-700/50 mb-3"},u(Z,{class:"w-6 h-6 text-slate-400 dark:text-slate-500",[t]:{class:t}},3,"Pz_6"),1,null),e("p",null,null,"No recent invoices",3,null)],1,null),1,"Pz_7"),1,null)],1,null),1,null)],1,null)],1,null),1,"Pz_8")},kt=B(f(wt,"s_G4PaHCacZj0")),yt=Object.freeze(Object.defineProperty({__proto__:null,default:kt,useDashboardDataLoader:nl},Symbol.toStringTag,{value:"Module"})),_t=Ve.join(process.cwd(),"private_uploads"),Tt=async l=>{const{params:s,redirect:n,headers:r,error:a}=l;if(!(await Y(l)).isAuthenticated)throw n(303,"/auth");const o=s.fileName;if(!o||o.includes("..")||o.includes("/"))throw a(400,"Invalid filename");const d=Ve.join(_t,o);try{await je.promises.access(d)}catch{throw a(404,"File not found")}try{const m=await je.promises.readFile(d);r.set("Content-Type","application/pdf"),r.set("Content-Length",m.length.toString()),r.set("Content-Disposition",`inline; filename="${o}"`),l.send(new Response(m));return}catch(m){throw console.error("Failed to read file:",m),a(500,"Could not read file")}},Et=Object.freeze(Object.defineProperty({__proto__:null,onGet:Tt},Symbol.toStringTag,{value:"Module"})),St=ce(process.cwd(),"private_uploads","invoices"),Lt=async l=>{var i;const{params:s,error:n,headers:r}=l;if(!(await Y(l)).isAuthenticated)throw n(401,"Unauthorized");try{const o=s.fileName;if(o.includes("..")||o.includes("/"))throw n(400,"Invalid file name");const d=ce(St,o),m=await Pl(d),c=(i=o.split(".").pop())==null?void 0:i.toLowerCase();let x="application/octet-stream";c==="pdf"?x="application/pdf":["png","jpg","jpeg","gif","webp"].includes(c||"")&&(x=`image/${c}`),r.set("Content-Type",x),r.set("Content-Length",m.length.toString()),r.set("Content-Disposition",`inline; filename="${o}"`),l.send(m)}catch(o){throw console.error("File serving failed:",o),n(404,"File not found")}},Ct=Object.freeze(Object.defineProperty({__proto__:null,onGet:Lt},Symbol.toStringTag,{value:"Module"})),Rt=async l=>{const{json:s,error:n}=l;if(!(await Y(l)).isAuthenticated)throw n(401,"Unauthorized");try{const i=(await l.request.formData()).get("contract");if(!i)throw n(400,"No file uploaded.");if(i.type!=="application/pdf")throw n(400,"Only PDF files are allowed.");const o=Ge(8).toString("hex"),d=xe.extname(i.name)||".pdf",m=`${xe.basename(i.name,d)}-${Date.now()}-${o}${d}`,c=xe.join(process.cwd(),"private_uploads");await He(c,{recursive:!0});const x=xe.join(c,m),v=Buffer.from(await i.arrayBuffer());await Re(x,v),s(200,{success:!0,fileName:m})}catch(a){throw console.error("File upload error:",a),a.status?a:n(500,"An unexpected error occurred during file upload.")}},At=Object.freeze(Object.defineProperty({__proto__:null,onPost:Rt},Symbol.toStringTag,{value:"Module"})),Nt=async l=>{const n=(await l.request.formData()).get("file");if(!n||typeof n=="string"){l.json(400,{error:"No file uploaded"});return}const r=await n.arrayBuffer(),a=Buffer.from(r),i=n.type.split("/")[1]||"jpg",o=`tree-${Date.now()}-${Math.random().toString(36).slice(2,8)}.${i}`,d=ce(process.cwd(),"public","uploads",o);await Re(d,a),l.json(200,{url:`/uploads/${o}`})},It=Object.freeze(Object.defineProperty({__proto__:null,onPost:Nt},Symbol.toStringTag,{value:"Module"})),Be=ce(process.cwd(),"private_uploads","invoices"),Mt=async l=>{const{request:s,error:n,json:r}=l;if(!(await Y(l)).isAuthenticated){r(401,{success:!1,error:"Unauthorized"});return}try{await He(Be,{recursive:!0});const o=(await s.formData()).get("file");if(!o){r(400,{success:!1,error:"File not provided"});return}if(!o.type.startsWith("application/pdf")&&!o.type.startsWith("image/")){r(400,{success:!1,error:"Invalid file type. Only PDF and images are allowed."});return}if(o.size>10485760){r(400,{success:!1,error:"File is too large. Max size is 10MB."});return}const d=Buffer.from(await o.arrayBuffer()),m=`${Date.now()}-${Ge(6).toString("hex")}`,c=o.name.split(".").pop()||"file",x=`invoice-${m}.${c}`,v=ce(Be,x);await Re(v,d),r(200,{success:!0,fileName:x});return}catch(i){console.error("File upload failed:",i),r(500,{success:!1,error:`Upload failed: ${i.message||"Unknown error"}`});return}},Dt=Object.freeze(Object.defineProperty({__proto__:null,onPost:Mt},Symbol.toStringTag,{value:"Module"})),Ut=({cookie:l,redirect:s})=>{throw l.delete("auth_token",{path:"/"}),l.delete("user_type",{path:"/"}),s(302,"/auth")},Ot=async(l,s)=>{try{console.log("[LOGOUT] Starting logout process"),Ae(s),await new Promise(a=>setTimeout(a,100));const n=s.cookie.get("auth_token"),r=s.cookie.get("user_type");if(n||r)throw console.error("[LOGOUT] Cookies not cleared properly:",{authToken:n,userType:r}),new Error("Failed to clear authentication cookies");return console.log("[LOGOUT] Successfully cleared all cookies"),s.redirect(302,"/auth"),{success:!0}}catch(n){return console.error("Logout error:",n),{success:!1,error:n instanceof Error?n.message:"Logout failed"}}},rl=U(f(Ot,"s_lYyU40i0tiI")),Pt=()=>{var n,r;F();const l=rl(),s=((n=l.value)==null?void 0:n.success)===!1;return e("div",null,{class:"min-h-screen w-full flex items-center justify-center transition-colors duration-300 bg-gradient-to-b from-blue-50 to-indigo-100 dark:from-gray-950 dark:to-blue-950 py-6 px-4 sm:px-6 lg:px-8 overflow-hidden relative"},[e("div",null,{class:"fixed inset-0 pointer-events-none overflow-hidden"},[e("div",null,{class:"w-20 h-20 bg-blue-500/10 rounded-full absolute top-[10%] left-[15%] animate-[float_15s_infinite]"},null,3,null),e("div",null,{class:"w-32 h-32 bg-indigo-500/10 rounded-full absolute top-[30%] left-[65%] animate-[float_18s_infinite]",style:"animation-delay: 0.5s;"},null,3,null),e("div",null,{class:"w-16 h-16 bg-teal-500/10 rounded-full absolute top-[70%] left-[25%] animate-[float_12s_infinite]",style:"animation-delay: 1s;"},null,3,null)],3,null),e("div",null,{class:"absolute top-6 left-1/2 transform -translate-x-1/2"},e("div",null,{class:"flex items-center"},[e("div",null,{class:"relative"},e("div",null,{class:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-600 to-indigo-600 flex items-center justify-center text-white shadow-lg"},e("svg",null,{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},e("path",null,{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9 9 10.5-3m0 6.553v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 1 1-.99-3.467l2.31-.66a2.25 2.25 0 0 0 1.632-2.163Zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 0 1-1.632 2.163l-1.32.377a1.803 1.803 0 0 1-.99-3.467l2.31-.66A2.25 2.25 0 0 0 9 15.553Z"},null,3,null),3,null),3,null),3,null),e("h1",null,{class:"ml-2 text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400"},"Move On Challenge",3,null)],3,null),3,null),e("div",null,{class:"max-w-md w-full z-10"},[e("div",null,{class:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden backdrop-blur-sm p-8 animate-[fade-in_0.5s_ease-out]"},[e("div",null,{class:"text-center mb-8"},[e("h2",null,{class:"text-3xl font-bold mb-3 text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400"},"Log Out",3,null),e("p",null,{class:"text-gray-600 dark:text-gray-400"},"Are you sure you want to log out?",3,null)],3,null),u(O,{action:l,class:"space-y-6",spaReset:!0,get"preventdefault:submit"(){return l.isRunning},children:[e("button",null,{type:"submit",disabled:b(a=>a.isRunning,[l],"p0.isRunning"),class:"w-full flex justify-center items-center py-3 px-4 rounded-xl text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 dark:from-blue-500 dark:to-indigo-500 dark:hover:from-blue-600 dark:hover:to-indigo-600 font-medium shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-70 disabled:cursor-not-allowed"},l.isRunning?e("span",null,{class:"flex items-center"},[u(ge,{class:"animate-spin mr-2 h-5 w-5",[t]:{class:t}},3,"6d_0"),"Logging out..."],1,"6d_1"):e("span",null,{class:"flex items-center"},[u(ll,{class:"mr-2 h-5 w-5",[t]:{class:t}},3,"6d_2"),"Confirm Logout"],1,null),1,null),s&&e("div",null,{class:"p-3 bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300 text-sm mt-4"},[e("p",null,null,"There was a problem logging you out. Please try again.",3,null),((r=l.value)==null?void 0:r.error)&&e("p",null,{class:"mt-1 text-xs opacity-80"},b(a=>a.value.error,[l],"p0.value.error"),3,"6d_3")],1,"6d_4"),e("a",null,{href:"/challenges",class:"block w-full text-center mt-4 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors duration-200"},"Cancel",3,null)],[t]:{action:t,class:t,spaReset:t,"preventdefault:submit":b(a=>a.isRunning,[l],"p0.isRunning")}},1,"6d_5")],1,null),e("div",null,{class:"mt-6 text-center text-sm text-gray-600 dark:text-gray-400"},"Thank you for using Move On Challenge",3,null)],1,null),e("style",null,null,`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes float {
          0% { transform: translate(0, 0); }
          25% { transform: translate(5px, -15px); }
          50% { transform: translate(10px, 0); }
          75% { transform: translate(5px, 15px); }
          100% { transform: translate(0, 0); }
        }
        
        @keyframes fade-in {
          0% { opacity: 0; }
          100% { opacity: 1; }
        }
      `,3,null)],1,"6d_6")},jt=B(f(Pt,"s_zqPwfW3jn0I")),Ft=Object.freeze(Object.defineProperty({__proto__:null,default:jt,onGet:Ut,useLogout:rl},Symbol.toStringTag,{value:"Module"})),$t=async(l,s)=>{try{return console.log("[LOGOUT] Starting logout process"),Ae(s),s.redirect(302,"/auth"),{success:!0}}catch(n){return console.error("Logout error:",n),{success:!1,error:n instanceof Error?n.message:"Logout failed"}}},qt=U(f($t,"s_uyYPcWOxv4U")),Bt=async(l,s)=>{const n=I(s),{email:r}=l;try{return{success:!0,isRegistered:(await n.execute({sql:"SELECT id FROM users WHERE email = ?",args:[r]})).rows.length>0}}catch(a){return console.error("Email check error:",a),{success:!1,error:a instanceof Error?a.message:"Failed to check email"}}},ol=U(f(Bt,"s_DmU9OP9DRTo")),Yt=async(l,s)=>{const n=I(s),{email:r,password:a,username:i}=l;try{const o=await zl(a),m=(await n.execute({sql:"SELECT COUNT(*) as count FROM users",args:[]})).rows[0].count===0,c=r==="golfredo.pf@gmail.com"||m?"admin":"freelancer";let x;if(x=(await n.execute({sql:"INSERT INTO users (email, password_hash, type, username) VALUES (?, ?, ?, ?)",args:[r,o,c,i||r.split("@")[0]]})).lastInsertRowid,!x)throw new Error("Registration failed: userId is undefined");return Qe(s,x,c),s.redirect(302,"/"),{success:!0}}catch(o){return console.error("Registration error:",o),{success:!1,error:o instanceof Error?o.message:"Registration failed"}}},il=U(f(Yt,"s_ifiWVdoZ0cQ")),zt=async l=>(await we(l),{success:!0}),Te=V(f(zt,"s_0gRwIEUvq0E")),Vt=async(l,s)=>{const n=I(s),{email:r,password:a}=l;try{const o=(await n.execute({sql:"SELECT * FROM users WHERE email = ?",args:[r]})).rows[0];if(!o||typeof o.password_hash!="string"||!o.id)return console.error("Login: usuario no encontrado o datos invlidos",{email:r,user:o}),{success:!1,error:"Invalid user data"};console.log("Login: password ingresada:",a),console.log("Login: hash guardado:",o.password_hash);const d=await Vl(a,o.password_hash);if(console.log("Login: resultado de verificacin:",d),!d)return{success:!1,error:"Invalid password"};const m=String(o.id);await n.execute({sql:"UPDATE users SET session_expires = ? WHERE id = ?",args:[new Date(Date.now()+36e5),m]});const c=o.type==="admin"?"admin":o.type==="super_admin"?"super_admin":"freelancer";return Qe(s,m,c),s.redirect(302,"/"),{success:!0}}catch(i){return console.error("Login error:",i),{success:!1,error:"Login failed"}}},ul=U(f(Vt,"s_YXIc7hgvWuM")),Ht=async()=>{var i,o;const[l,s,n,r,a]=N();r.value=!0,n.value="",await new Promise(d=>setTimeout(d,500)),(i=l.value)!=null&&i.success?(a.value=l.value.isRegistered?"password":"register",s.value=document.getElementById("email").value):n.value=((o=l.value)==null?void 0:o.error)||"Failed to check email",r.value=!1},Gt=async()=>{var r,a;const[l,s,n]=N();s.value=!0,l.value="",await new Promise(i=>setTimeout(i,500)),(r=n.value)!=null&&r.success||(l.value=((a=n.value)==null?void 0:a.error)||"Login failed"),s.value=!1},Xt=async()=>{var r,a;const[l,s,n]=N();s.value=!0,l.value="",await new Promise(i=>setTimeout(i,500)),(r=n.value)!=null&&r.success||(l.value=((a=n.value)==null?void 0:a.error)||"Registration failed"),s.value=!1},Wt=()=>{var c;F(),Te();const l=Te(),s=ol(),n=il(),r=ul(),a=g("email"),i=g(""),o=g(""),d=g(""),m=g(!1);return(c=l.value)!=null&&c.success&&console.log("Tables initialized successfully"),e("main",null,{class:"min-h-screen bg-gradient-to-br from-slate-50 to-white dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex flex-col items-center justify-center"},[e("header",null,{class:"w-full flex flex-col items-center py-8 mb-2"},[e("img",null,{src:"/logo.png",alt:"Logo SaveeTimelock",class:"w-20 h-20 mb-2 drop-shadow-xl animate-pop"},null,3,null),e("h1",null,{class:"text-3xl md:text-4xl font-extrabold text-slate-700 dark:text-teal-400 mb-2 flex items-center gap-2 animate-slide-down"},[e("span",null,{role:"img","aria-label":"clock"},"",3,null)," Welcome to SaveeTimelock"],3,null),e("p",null,{class:"text-center text-lg text-slate-600 dark:text-slate-300 max-w-2xl animate-fade-in"},"Sign in or register to start tracking your time and managing your projects.",3,null)],3,null),e("section",null,{class:"w-full flex flex-col items-center"},e("div",null,{class:"w-full max-w-md rounded-3xl overflow-hidden shadow-2xl bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm p-2 md:p-6 animate-grow-in transition-transform duration-700"},[a.value==="email"&&u(O,{action:s,class:"space-y-6",onSubmit$:f(Ht,"s_xydvnoO3NQo",[s,i,d,m,a]),children:[e("div",null,{class:"space-y-2"},[e("label",null,{for:"email",class:"block text-sm font-medium text-slate-700 dark:text-slate-200"},"Email address",3,null),e("div",null,{class:"relative"},[e("div",null,{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},u(Kl,{class:"h-5 w-5 text-slate-400 dark:text-slate-500",[t]:{class:t}},3,"eD_0"),1,null),e("input",null,{id:"email",name:"email",type:"email",required:!0,class:"pl-10 block w-full rounded-xl border-0 py-3 text-slate-700 dark:text-white shadow-sm ring-1 ring-inset ring-slate-300 dark:ring-slate-600 placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-teal-500 dark:focus:ring-teal-400 bg-white dark:bg-gray-800",placeholder:"your@email.com"},null,3,null)],1,null),e("p",null,{class:"text-xs text-slate-500 dark:text-slate-400 mt-1"},"We'll check if you already have an account",3,null)],1,null),e("button",null,{type:"submit",disabled:b(x=>x.value,[m],"p0.value"),class:"w-full flex justify-center items-center py-3 px-4 rounded-xl text-white bg-gradient-to-r from-slate-700 to-teal-500 hover:from-slate-800 hover:to-teal-600 dark:from-slate-700 dark:to-teal-600 font-medium shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-70 disabled:cursor-not-allowed"},m.value?e("span",null,{class:"flex items-center"},[u(ge,{class:"animate-spin mr-2 h-5 w-5 text-white",[t]:{class:t}},3,"eD_1"),"Verifying..."],1,"eD_2"):"Continue",1,null)],[t]:{action:t,class:t,onSubmit$:t}},1,"eD_3"),a.value==="password"&&u(O,{action:r,class:"space-y-6",onSubmit$:f(Gt,"s_90k8QQrQSdk",[d,m,r]),children:[e("input",null,{type:"hidden",name:"email",value:b(x=>x.value,[i],"p0.value")},null,3,null),e("div",null,{class:"space-y-2"},[e("label",null,{for:"password",class:"block text-sm font-medium text-slate-700 dark:text-slate-200"},"Password",3,null),e("div",null,{class:"relative"},[e("div",null,{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},u(ne,{class:"h-5 w-5 text-slate-400 dark:text-slate-500",[t]:{class:t}},3,"eD_4"),1,null),e("input",null,{id:"password",name:"password",type:"password",required:!0,class:"pl-10 block w-full rounded-xl border-0 py-3 text-slate-700 dark:text-white shadow-sm ring-1 ring-inset ring-slate-300 dark:ring-slate-600 placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-teal-500 dark:focus:ring-teal-400 bg-white dark:bg-gray-800",placeholder:""},null,3,null)],1,null)],1,null),e("div",null,{class:"flex justify-between items-center"},[e("button",null,{type:"button",class:"flex items-center px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 transition-all duration-200 text-sm",onClick$:h("s_SkMVgm4N03A",[d,o,a])},[u($e,{class:"mr-2 h-4 w-4",[t]:{class:t}},3,"eD_5"),"Back"],1,null),e("button",null,{type:"submit",disabled:b(x=>x.value,[m],"p0.value"),class:"flex justify-center items-center py-2 px-6 rounded-lg text-white bg-gradient-to-r from-slate-700 to-teal-500 hover:from-slate-800 hover:to-teal-600 dark:from-slate-700 dark:to-teal-600 font-medium shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-70 disabled:cursor-not-allowed"},m.value?e("span",null,{class:"flex items-center"},[u(ge,{class:"animate-spin mr-2 h-5 w-5 text-white",[t]:{class:t}},3,"eD_6"),"Signing in..."],1,"eD_7"):"Sign in",1,null)],1,null)],[t]:{action:t,class:t,onSubmit$:t}},1,"eD_8"),a.value==="register"&&u(O,{action:n,class:"space-y-6",onSubmit$:f(Xt,"s_3ewRqCLfpMg",[d,m,n]),children:[e("input",null,{type:"hidden",name:"email",value:b(x=>x.value,[i],"p0.value")},null,3,null),e("div",null,{class:"space-y-2"},[e("label",null,{for:"password",class:"block text-sm font-medium text-slate-700 dark:text-slate-200"},"Create a password",3,null),e("div",null,{class:"relative"},[e("div",null,{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},u(ne,{class:"h-5 w-5 text-slate-400 dark:text-slate-500",[t]:{class:t}},3,"eD_9"),1,null),e("input",null,{id:"password",name:"password",type:"password",required:!0,class:"pl-10 block w-full rounded-xl border-0 py-3 text-slate-700 dark:text-white shadow-sm ring-1 ring-inset ring-slate-300 dark:ring-slate-600 placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-teal-500 dark:focus:ring-teal-400 bg-white dark:bg-gray-800",placeholder:"",minLength:6},null,3,null)],1,null),e("p",null,{class:"text-xs text-slate-500 dark:text-slate-400 mt-1"},"Password must be at least 6 characters",3,null)],1,null),e("div",null,{class:"flex justify-between items-center"},[e("button",null,{type:"button",class:"flex items-center px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 transition-all duration-200 text-sm",onClick$:h("s_sFCb2F6Zv7w",[d,o,a])},[u($e,{class:"mr-2 h-4 w-4",[t]:{class:t}},3,"eD_10"),"Back"],1,null),e("button",null,{type:"submit",disabled:b(x=>x.value,[m],"p0.value"),class:"flex justify-center items-center py-2 px-6 rounded-lg text-white bg-gradient-to-r from-slate-700 to-teal-500 hover:from-slate-800 hover:to-teal-600 dark:from-slate-700 dark:to-teal-600 font-medium shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-70 disabled:cursor-not-allowed"},m.value?e("span",null,{class:"flex items-center"},[u(ge,{class:"animate-spin mr-2 h-5 w-5 text-white",[t]:{class:t}},3,"eD_11"),"Creating account..."],1,"eD_12"):"Create account",1,null)],1,null)],[t]:{action:t,class:t,onSubmit$:t}},1,"eD_13"),d.value&&e("div",null,{class:"mt-6 p-4 bg-rose-50 dark:bg-rose-900/20 border border-rose-200 dark:border-rose-800 rounded-xl animate-[slide-up_0.3s_ease-out]"},e("div",null,{class:"flex items-start"},[u(Hl,{class:"h-5 w-5 text-rose-500 dark:text-rose-400 mt-0.5 mr-2 flex-shrink-0",[t]:{class:t}},3,"eD_14"),e("p",null,{class:"text-sm text-rose-600 dark:text-rose-300"},b(x=>x.value,[d],"p0.value"),3,null)],1,null),1,"eD_15")],1,null),1,null),e("div",null,{class:"mt-6 text-center text-sm text-slate-600 dark:text-slate-400"},["By continuing, you agree to our",e("a",null,{href:"#",class:"text-teal-600 hover:text-teal-500 dark:text-teal-400 dark:hover:text-teal-300 ml-1"},"Terms of Service",3,null),e("span",null,{class:"mx-1"},"and",3,null),e("a",null,{href:"#",class:"text-teal-600 hover:text-teal-500 dark:text-teal-400 dark:hover:text-teal-300"},"Privacy Policy",3,null)],3,null),e("style",null,null,`
        .animate-fade-in { animation: fadeIn 1s both; }
        .animate-slide-down { animation: slideDown 0.8s both; }
        .animate-slide-up { animation: slideUp 0.7s both; }
        .animate-grow-in { animation: growIn 1.2s both; }
        .animate-pop { animation: popIn 0.5s both; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-40px); } to { opacity: 1, transform: translateY(0); } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1, transform: translateY(0); } }
        @keyframes growIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1, transform: scale(1); } }
        @keyframes popIn { 0% { transform: scale(0.7); opacity: 0; } 80% { transform: scale(1.1); opacity: 1; } 100% { transform: scale(1); } }
      `,3,null)],1,"eD_16")},Kt=B(f(Wt,"s_86Uj5I0HEKo")),Qt=Object.freeze(Object.defineProperty({__proto__:null,default:Kt,useCheckEmail:ol,useDbInitializer:Te,useLogin:ul,useLogout:qt,useRegister:il},Symbol.toStringTag,{value:"Module"})),Zt=async l=>(await I(l).execute(`
    SELECT c.id, c.professional_id, p.name as professional_name, c.start_date, c.end_date, c.status, c.contract_url 
    FROM contracts c
    JOIN professionals p ON c.professional_id = p.id
  `)).rows,dl=V(f(Zt,"s_pOtMp0xpTww")),Jt=async l=>(await I(l).execute("SELECT id, name, role FROM professionals")).rows,cl=V(f(Jt,"s_f6iI4LuEstI")),es=async(l,s)=>{const n=I(s),r=await Y(s);if(!r.isAuthenticated||!r.userId)throw s.redirect(303,"/auth");try{return await n.execute({sql:"INSERT INTO contracts (professional_id, user_id, start_date, end_date, status, contract_url) VALUES (?, ?, ?, ?, ?, ?)",args:[l.professionalId,r.userId,l.startDate,l.endDate,"active",l.contractUrl??null]}),{success:!0}}catch(a){return console.error("Failed to create contract:",a),{success:!1,error:"Failed to create contract."}}},ls=l=>l.object({professionalId:l.string().min(1,"Professional is required."),startDate:l.string().min(1,"Start date is required."),endDate:l.string().min(1,"End date is required."),contractUrl:l.string().optional().nullable()}),ml=U(f(es,"s_LIYrlyegNzI"),X(f(ls,"s_JXXcjSD3j1E"))),ts=({track:l})=>{const[s,n]=N();l(()=>s.value),n.value=s.value},ss=()=>{const[l,s,n,r,a,i,o,d]=N();i.value="",o.value="",n.value="",s.value=null,l.value="",a.value=!1,d.value="",r.value&&(r.value.value="")},as=async l=>{const[s,n,r,a]=N(),i=l.target;if(!i.files||i.files.length===0)return;const o=i.files[0];if(o.type!=="application/pdf"){a.value="Only PDF files are allowed.";return}r.value=!0,a.value="";const d=new FormData;d.append("contract",o);try{const m=await fetch("/api/upload-contract",{method:"POST",body:d});if(!m.ok){const x=await m.json();throw new Error(x.error||"Upload failed")}const c=await m.json();n.value=c.fileName,s.value=`/api/contracts/view/${c.fileName}`}catch(m){a.value=m.message||"An unexpected error occurred.",n.value=null,s.value=""}finally{r.value=!1}},ns=()=>{const[l,s,n]=N();if(!n.value){s.value=l.value;return}const r=n.value.toLowerCase();s.value=l.value.filter(a=>a.professional_name.toLowerCase().includes(r)||a.id.toString().includes(r))},rs=()=>{const[l,s]=N();s.value=!1,l()},os=()=>{var j;F();const l=dl(),s=cl(),n=ml(),r=g(""),a=g(!1),i=g(""),o=g(""),d=g(""),m=g(null),c=g(""),x=g(!1),v=g(""),C=g(),R=g([]);be(f(ts,"s_vbBz20uaL9Q",[l,R]));const w=f(ss,"s_g0LwifoYHg8",[c,m,d,C,x,i,o,v]),L=f(as,"s_cm8OO2jiQek",[c,m,x,v]),M=f(ns,"s_NFp6Cx4K5Yc",[l,R,r]),P=y=>{if(!y)return"N/A";const A=new Date(y),z=A.getTimezoneOffset()*6e4;return new Date(A.getTime()+z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})};return e("main",null,{class:"min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900"},[e("div",null,{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},[e("header",null,{class:"mb-8 bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-800 dark:to-slate-700 rounded-xl shadow-sm p-6"},e("div",null,{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},[e("div",null,{class:"flex items-center"},[u(ve,{class:"h-8 w-8 text-teal-600 dark:text-teal-500 mr-3",[t]:{class:t}},3,"d3_0"),e("div",null,null,[e("h1",null,{class:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100"},"Contracts",3,null),e("p",null,{class:"text-slate-500 dark:text-slate-400 mt-1"},"Manage contracts with professionals",3,null)],3,null)],1,null),e("div",null,{class:"mt-4 sm:mt-0 flex flex-col sm:flex-row gap-3"},[e("button",null,{class:"inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all duration-200",onClick$:h("s_3D44dgnfvmk",[a])},[u(oe,{class:"mr-2 h-4 w-4",[t]:{class:t}},3,"d3_1"),"Create Contract"],1,null),e("button",null,{class:"inline-flex items-center justify-center px-4 py-2 border border-slate-200 dark:border-slate-600 rounded-md shadow-sm text-sm font-medium text-slate-700 dark:text-slate-200 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all duration-200"},[u(Ze,{class:"mr-2 h-4 w-4",[t]:{class:t}},3,"d3_2"),"Export"],1,null)],1,null)],1,null),1,null),e("div",null,{class:"mb-6"},e("div",null,{class:"flex flex-col sm:flex-row gap-4 bg-white dark:bg-slate-800 rounded-lg shadow-sm p-4 border border-slate-100 dark:border-slate-700"},[e("div",null,{class:"relative flex-1"},[e("div",null,{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},u(Oe,{class:"h-5 w-5 text-slate-400 dark:text-slate-500",[t]:{class:t}},3,"d3_3"),1,null),e("input",null,{type:"text",value:r,class:"block w-full pl-10 pr-3 py-2 border border-slate-200 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 placeholder-slate-400 shadow-sm hover:border-teal-400 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all duration-200",placeholder:"Search by professional or ID...",onInput$:h("s_fr6YtxdVoQM",[r]),onInput$:M},null,3,null)],1,null),e("div",null,{class:"flex-shrink-0"},e("button",null,{class:"inline-flex items-center px-4 py-2 border border-slate-200 dark:border-slate-600 rounded-md shadow-sm text-sm font-medium text-slate-700 dark:text-slate-200 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all duration-200"},[u(De,{class:"mr-2 h-4 w-4",[t]:{class:t}},3,"d3_4"),"Filter"],1,null),1,null)],1,null),1,null),e("div",null,{class:"bg-white dark:bg-slate-800 shadow-lg rounded-xl overflow-hidden border border-slate-200 dark:border-slate-700"},[e("div",null,{class:"overflow-x-auto"},e("table",null,{class:"min-w-full divide-y divide-slate-200 dark:divide-slate-700"},[e("thead",null,{class:"bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-800 dark:to-slate-700"},e("tr",null,null,[e("th",null,{scope:"col",class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"ID",3,null),e("th",null,{scope:"col",class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Professional",3,null),e("th",null,{scope:"col",class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Start Date",3,null),e("th",null,{scope:"col",class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"End Date",3,null),e("th",null,{scope:"col",class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Status",3,null),e("th",null,{scope:"col",class:"px-6 py-4 text-right text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Actions",3,null)],3,null),3,null),e("tbody",null,{class:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700"},R.value.map(y=>F(e("tr",null,{class:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all duration-200 group"},[e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-700 dark:text-slate-200 group-hover:text-teal-600 dark:group-hover:text-teal-500"},["#CONT-",y.id.toString().padStart(3,"0")],1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-200 font-medium"},_(y,"professional_name"),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300"},P(y.start_date),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300"},P(y.end_date),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap"},e("span",{class:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${y.status==="active"?"bg-gradient-to-r from-emerald-50 to-emerald-100 text-emerald-700 dark:from-emerald-900/30 dark:to-emerald-800/30 dark:text-emerald-400":"bg-gradient-to-r from-rose-50 to-rose-100 text-rose-700 dark:from-rose-900/30 dark:to-rose-800/30 dark:text-rose-400"}`},null,y.status.charAt(0).toUpperCase()+y.status.slice(1),1,null),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},e("div",null,{class:"flex justify-end space-x-2"},[y.contract_url?e("a",{href:`/api/contracts/view/${y.contract_url}`},{target:"_blank",rel:"noopener noreferrer",class:"p-1.5 text-slate-600 dark:text-slate-400 hover:text-teal-600 hover:bg-teal-50 dark:hover:text-teal-400 dark:hover:bg-teal-900/20 rounded-full transition-all",title:"View Contract"},u(de,{class:"h-5 w-5",[t]:{class:t}},3,"d3_5"),1,"d3_6"):e("button",null,{class:"p-1.5 text-slate-400 dark:text-slate-600 rounded-full transition-all cursor-not-allowed",disabled:!0,title:"No contract uploaded"},u(de,{class:"h-5 w-5",[t]:{class:t}},3,"d3_7"),1,null),e("button",null,{class:"p-1.5 text-slate-600 dark:text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:text-indigo-400 dark:hover:bg-indigo-900/20 rounded-full transition-all"},u(Z,{class:"h-5 w-5",title:"View Invoices",[t]:{class:t,title:t}},3,"d3_8"),1,null)],1,null),1,null)],1,y.id))),1,null)],1,null),1,null),R.value.length===0&&e("div",null,{class:"px-6 py-12 text-center"},[e("div",null,{class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700/50 mb-4"},u(ve,{class:"w-8 h-8 text-slate-400 dark:text-slate-500",[t]:{class:t}},3,"d3_9"),1,null),e("p",null,{class:"text-slate-500 dark:text-slate-400 font-medium"},"No contracts found.",3,null),e("p",null,{class:"text-slate-400 dark:text-slate-500 mt-1 text-sm"},"Create a new contract to get started.",3,null)],1,"d3_10")],1,null),e("div",null,{class:"flex items-center justify-between mt-6 bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border border-slate-100 dark:border-slate-700"},e("div",null,{class:"text-sm text-slate-600 dark:text-slate-400"},["Showing ",e("span",null,{class:"font-medium text-teal-600 dark:text-teal-500"},b(y=>y.value.length,[R],"p0.value.length"),3,null)," of ",e("span",null,{class:"font-medium text-teal-600 dark:text-teal-500"},b(y=>y.value.length,[l],"p0.value.length"),3,null)," contracts"],3,null),3,null)],1,null),a.value&&e("div",null,{class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},e("div",null,{class:"flex items-end sm:items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},[e("div",null,{class:"fixed inset-0 bg-slate-700/70 dark:bg-slate-900/80 backdrop-blur-md transition-opacity","aria-hidden":"true",onClick$:h("s_vbDtEMOt8dg",[a])},null,3,null),e("div",null,{class:"inline-block align-bottom bg-white/95 dark:bg-slate-800/95 backdrop-blur-md rounded-xl text-left overflow-hidden shadow-2xl transform transition-all border border-slate-100/50 dark:border-slate-700/50 sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},u(O,{action:n,onSubmitCompleted$:f(rs,"s_wxLSoFiDGro",[w,a]),children:[e("div",null,{class:"px-6 pt-5 pb-4 sm:p-6 sm:pb-4"},e("div",null,{class:"sm:flex sm:items-start"},e("div",null,{class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},[e("h3",null,{class:"text-xl leading-6 font-medium text-slate-800 dark:text-slate-100",id:"modal-title"},"Create New Contract",3,null),e("div",null,{class:"mt-4"},e("div",null,{class:"space-y-4"},[e("div",null,null,[e("label",null,{for:"professional",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Professional",3,null),e("select",null,{name:"professionalId",id:"professional",value:i,class:"mt-1 block w-full pl-3 pr-10 py-3 text-base border border-slate-300 dark:border-slate-600 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-lg bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 shadow-sm transition-all",required:!0,onInput$:h("s_K0awB0bLaxM",[i])},[e("option",null,{value:""},"Select a professional",3,null),s.value.map(y=>e("option",{value:_(y,"id")},null,`${y.name} - ${y.role}`,1,`prof-${y.id}`))],1,null)],1,null),e("div",null,{class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},[e("div",null,null,[e("label",null,{for:"start-date",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Start Date",3,null),e("input",null,{type:"date",name:"startDate",id:"start-date",value:o,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",required:!0,onInput$:h("s_MJ0xPQa0QLc",[o])},null,3,null)],3,null),e("div",null,null,[e("label",null,{for:"end-date",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"End Date",3,null),e("input",null,{type:"date",name:"endDate",id:"end-date",value:d,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",required:!0,onInput$:h("s_PFNm876R0OE",[d])},null,3,null)],3,null)],3,null),e("div",null,null,[e("label",null,{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Contract PDF",3,null),c.value?e("div",null,{class:"mt-2"},[e("div",null,{class:"relative h-64 w-full rounded-lg border border-slate-300 dark:border-slate-600 overflow-hidden group"},[e("iframe",null,{src:b(y=>y.value,[c],"p0.value"),class:"h-full w-full",title:"Contract Preview"},null,3,null),e("a",null,{href:b(y=>y.value,[c],"p0.value"),target:"_blank",rel:"noopener noreferrer",class:"absolute top-2 right-2 p-2 bg-slate-700/50 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Open in new tab"},u(Je,{class:"h-5 w-5",[t]:{class:t}},3,"d3_11"),1,null)],1,null),e("button",null,{type:"button",class:"mt-2 inline-flex items-center text-sm font-medium text-red-600 hover:text-red-800 dark:text-red-500 dark:hover:text-red-400",onClick$:h("s_QAjq0gRc9qQ",[c,m,C])},[u(sl,{class:"mr-1.5 h-4 w-4",[t]:{class:t}},3,"d3_12"),"Remove PDF"],1,null)],1,"d3_13"):e("div",null,{class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 dark:border-slate-600 border-dashed rounded-lg"},e("div",null,{class:"space-y-1 text-center"},[x.value?u(G,{class:"mx-auto h-12 w-12 text-slate-400 animate-spin",[t]:{class:t}},3,"d3_14"):u(el,{class:"mx-auto h-12 w-12 text-slate-400",[t]:{class:t}},3,"d3_15"),e("div",null,{class:"flex text-sm text-slate-600 dark:text-slate-400"},[e("label",null,{for:"file-upload",class:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-teal-600 dark:text-teal-500 hover:text-teal-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-teal-500"},[e("span",null,null,"Upload a file",3,null),e("input",{ref:C},{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",accept:"application/pdf",disabled:b(y=>y.value,[x],"p0.value"),onChange$:L},null,3,null)],1,null),e("p",null,{class:"pl-1"},"or drag and drop",3,null)],1,null),e("p",null,{class:"text-xs text-slate-500 dark:text-slate-500"},"PDF up to 10MB",3,null)],1,null),1,null),v.value&&e("p",null,{class:"mt-2 text-sm text-red-600 dark:text-red-500"},b(y=>y.value,[v],"p0.value"),3,"d3_16"),e("input",null,{type:"hidden",name:"contractUrl",value:b(y=>y.value??"",[m],'p0.value??""')},null,3,null)],1,null)],1,null),1,null)],1,null),1,null),1,null),e("div",null,{class:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-800 px-6 py-4 sm:flex sm:flex-row-reverse"},[e("button",null,{type:"submit",disabled:b((y,A)=>y.isRunning||A.value,[n,x],"p0.isRunning||p1.value"),class:"w-full inline-flex justify-center items-center rounded-lg border border-transparent shadow-sm px-5 py-2.5 bg-gradient-to-r from-teal-500 to-teal-600 text-base font-medium text-white hover:from-teal-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:ml-3 sm:w-auto sm:text-sm transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[n.isRunning?u(G,{class:"animate-spin h-5 w-5 mr-2",[t]:{class:t}},3,"d3_17"):u(ee,{class:"h-5 w-5 mr-2",[t]:{class:t}},3,"d3_18"),"Save Contract"],1,null),e("button",null,{type:"button",class:"mt-3 w-full inline-flex justify-center items-center rounded-lg border border-slate-200 dark:border-slate-600 shadow-sm px-5 py-2.5 bg-white dark:bg-slate-800 text-base font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-all duration-200",onClick$:h("s_C788vIi2DC8",[w,a])},[u(le,{class:"h-5 w-5 mr-2",[t]:{class:t}},3,"d3_19"),"Cancel"],1,null)],1,null),((j=n.value)==null?void 0:j.success)===!1&&e("div",null,{class:"p-4 bg-red-100 text-red-800 rounded-b-lg"},[u(W,{class:"inline h-5 w-5 mr-2",[t]:{class:t}},3,"d3_20"),b(y=>y.value.error,[n],"p0.value.error")],1,"d3_21")],[t]:{action:t,onSubmitCompleted$:t}},1,"d3_22"),1,null)],1,null),1,"d3_23")],1,"d3_24")},is=B(f(os,"s_bsFwD0XY188")),us=Object.freeze(Object.defineProperty({__proto__:null,default:is,useContractsLoader:dl,useCreateContract:ml,useProfessionalsLoader:cl},Symbol.toStringTag,{value:"Module"})),ds=async l=>{const s=I(l),n=await s.execute(`
    SELECT i.id, i.professional_id, p.name as professional_name, i.contract_id, i.amount, i.currency, i.status, i.issue_date, i.paid_date, i.invoice_url 
    FROM invoices i
    JOIN professionals p ON i.professional_id = p.id
    ORDER BY i.issue_date DESC
  `),r=await s.execute("SELECT id, name, role FROM professionals ORDER BY name"),a=await s.execute(`
    SELECT c.id, c.professional_id, p.name as professional_name, c.start_date, c.end_date
    FROM contracts c
    JOIN professionals p ON c.professional_id = p.id
    WHERE c.status = 'active'
    ORDER BY p.name, c.start_date DESC
  `);return{invoices:n.rows.map(i=>({...i,amount:Number(i.amount)})),professionals:r.rows,contracts:a.rows}},pl=V(f(ds,"s_ZuT2HY9zmpM")),cs=async(l,s)=>{const n=I(s),r=await Y(s);if(!r.isAuthenticated||!r.userId)return{success:!1,error:"Authentication required."};const a=await n.execute({sql:"SELECT professional_id FROM contracts WHERE id = ?",args:[l.contractId]});if(a.rows.length===0)return{success:!1,error:"Contract not found."};const i=a.rows[0].professional_id;try{return await n.execute({sql:"INSERT INTO invoices (contract_id, professional_id, user_id, issue_date, amount, currency, status, paid_date, invoice_url) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)",args:[l.contractId,i,r.userId,l.issueDate,l.amount,l.currency,l.status,l.status==="paid"?new Date().toISOString().split("T")[0]:null,l.invoiceUrl]}),{success:!0}}catch(o){return console.error("Failed to add invoice:",o),{success:!1,error:"Failed to add invoice."}}},ms={contractId:E.coerce.number().int().positive(),issueDate:E.string().regex(/^\d{4}-\d{2}-\d{2}$/),amount:E.coerce.number().positive(),currency:E.string(),status:E.enum(["pending","paid"]),invoiceUrl:E.string().optional().nullable()},fl=U(f(cs,"s_8G0MNZu2NZ0"),X(f(ms,"s_H13o942bCtI"))),ps=async({id:l,status:s},n)=>{const r=I(n),a=s==="paid"?"pending":"paid",i=a==="paid"?new Date().toISOString().split("T")[0]:null;try{return await r.execute({sql:"UPDATE invoices SET status = ?, paid_date = ? WHERE id = ?",args:[a,i,l]}),{success:!0}}catch(o){return console.error("Failed to update invoice status:",o),{success:!1,error:"Failed to update status."}}},fs={id:E.coerce.number(),status:E.enum(["pending","paid"])},xl=U(f(ps,"s_Ti9m9weHHSs"),X(f(fs,"s_CVqZ0lQFoCg"))),xs=async({id:l},s)=>{const n=I(s);try{return await n.execute({sql:"DELETE FROM invoices WHERE id = ?",args:[l]}),{success:!0}}catch(r){return console.error("Failed to delete invoice:",r),{success:!1,error:"Failed to delete invoice."}}},gs={id:E.coerce.number()},gl=U(f(xs,"s_c4Qyl0s0PVo"),X(f(gs,"s_4ZbqH5h4Ri4"))),hs=({track:l})=>{const[s,n,r]=N();l(()=>n.value.invoices),l(()=>r.value);const a=r.value.toLowerCase();a?s.value=n.value.invoices.filter(i=>i.professional_name.toLowerCase().includes(a)):s.value=n.value.invoices},bs=({track:l})=>{const[s,n,r]=N();l(()=>s.value.invoices),r.value=s.value.invoices.filter(a=>a.status==="pending").reduce((a,i)=>a+i.amount,0),n.value=s.value.invoices.filter(a=>a.status==="paid").reduce((a,i)=>a+i.amount,0)},vs=()=>{const[l,s,n,r,a,i,o,d,m,c]=N();s.value="",d.value=new Date().toISOString().split("T")[0],l.value="",n.value="USD",m.value="pending",i.value=null,a.value="",o.value=!1,c.value="",r.value&&(r.value.value="")},ws=async l=>{const[s,n,r,a,i]=N(),o=l.target;if(!o.files||o.files.length===0)return;const d=o.files[0];a.value=!0,i.value="";const m=new FormData;m.append("file",d);try{const c=await fetch("/api/upload-invoice",{method:"POST",body:m});if(!c.ok){const v=await c.json();throw new Error(v.error||`HTTP error! ${c.status}`)}const x=await c.json();if(x.success)r.value=x.fileName,n.value=URL.createObjectURL(d);else throw new Error(x.error||"Upload failed")}catch(c){i.value=c.message||"An unknown error occurred during upload.",s.value&&(s.value.value="")}finally{a.value=!1}},ks=()=>{var r;const[l,s,n]=N();(r=l.value)!=null&&r.success&&(n.value=!1,s())},ys=()=>{var H,te,fe,ie,k,q,D;F();const l=pl(),s=fl(),n=xl(),r=gl(),a=g(!1),i=g(""),o=g(""),d=g(new Date().toISOString().split("T")[0]),m=g(""),c=g("USD"),x=g("pending"),v=g(null),C=g(""),R=g(!1),w=g(""),L=g(),M=g([]);be(f(hs,"s_09zgfJk3cKE",[M,l,i]));const P=g(0),j=g(0);be(f(bs,"s_Gb41b109yVk",[l,j,P]));const y=f(vs,"s_GwAboejWJWc",[m,o,c,L,C,v,R,d,x,w]),A=f(ws,"s_gJ13e1jvr0M",[L,C,v,R,w]),z=T=>{if(!T)return"-";const se=new Date(T),Ul=se.getTimezoneOffset()*6e4;return new Date(se.getTime()+Ul).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},p=(T,se)=>new Intl.NumberFormat("en-US",{style:"currency",currency:se}).format(T);return e("main",null,{class:"min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900"},[e("div",null,{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},[e("header",null,{class:"mb-8 bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-800 dark:to-slate-700 rounded-xl shadow-sm p-6"},e("div",null,{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},[e("div",null,{class:"flex items-center"},[u(Z,{class:"h-8 w-8 text-teal-600 dark:text-teal-500 mr-3",[t]:{class:t}},3,"T3_0"),e("div",null,null,[e("h1",null,{class:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100"},"Invoices",3,null),e("p",null,{class:"text-slate-500 dark:text-slate-400 mt-1"},"Track and manage all payments",3,null)],3,null)],1,null),e("button",null,{class:"mt-4 sm:mt-0 inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all duration-200",onClick$:h("s_Xh7yKGgpt0Y",[a])},[u(oe,{class:"mr-2 h-4 w-4",[t]:{class:t}},3,"T3_1"),"Add Invoice"],1,null)],1,null),1,null),e("div",null,{class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},[e("div",null,{class:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-5 border border-slate-100 dark:border-slate-700"},[e("h3",null,{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Total Invoices",3,null),e("p",null,{class:"text-2xl font-bold text-slate-800 dark:text-slate-200"},b(T=>T.value.invoices.length,[l],"p0.value.invoices.length"),3,null)],3,null),e("div",null,{class:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-5 border border-slate-100 dark:border-slate-700"},[e("h3",null,{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Pending Payment",3,null),e("p",null,{class:"text-2xl font-bold text-amber-600 dark:text-amber-400"},p(P.value,"USD"),1,null)],1,null),e("div",null,{class:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-5 border border-slate-100 dark:border-slate-700"},[e("h3",null,{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Total Paid",3,null),e("p",null,{class:"text-2xl font-bold text-emerald-600 dark:text-emerald-400"},p(j.value,"USD"),1,null)],1,null)],1,null),e("div",null,{class:"mb-6"},e("div",null,{class:"flex flex-col sm:flex-row gap-4 bg-white dark:bg-slate-800 rounded-lg shadow-sm p-4 border border-slate-100 dark:border-slate-700"},e("div",null,{class:"relative flex-1"},[e("div",null,{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},u(Oe,{class:"h-5 w-5 text-slate-400 dark:text-slate-500",[t]:{class:t}},3,"T3_2"),1,null),e("input",null,{type:"text",value:i,class:"block w-full pl-10 pr-3 py-2 border border-slate-200 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 placeholder-slate-400 shadow-sm hover:border-teal-400 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all duration-200",placeholder:"Search by professional...",onInput$:h("s_tpWw3z3lXmM",[i])},null,3,null)],1,null),1,null),1,null),e("div",null,{class:"bg-white dark:bg-slate-800 shadow-lg rounded-xl overflow-hidden border border-slate-200 dark:border-slate-700"},[e("div",null,{class:"overflow-x-auto"},e("table",null,{class:"min-w-full divide-y divide-slate-200 dark:divide-slate-700"},[e("thead",null,{class:"bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-800 dark:to-slate-700"},e("tr",null,null,[e("th",null,{class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Professional",3,null),e("th",null,{class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Issue Date",3,null),e("th",null,{class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Amount",3,null),e("th",null,{class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Status",3,null),e("th",null,{class:"px-6 py-4 text-right text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Actions",3,null)],3,null),3,null),e("tbody",null,{class:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700"},M.value.map(T=>F(e("tr",null,{class:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all duration-200 group"},[e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-100"},_(T,"professional_name"),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300"},z(T.issue_date),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm text-slate-800 dark:text-slate-100 font-semibold"},p(T.amount,T.currency),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap"},e("span",{class:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${T.status==="paid"?"bg-gradient-to-r from-emerald-50 to-emerald-100 text-emerald-700 dark:from-emerald-900/30 dark:to-emerald-800/30 dark:text-emerald-400":"bg-gradient-to-r from-amber-50 to-amber-100 text-amber-700 dark:from-amber-900/30 dark:to-amber-800/30 dark:text-amber-400"}`},null,T.status.charAt(0).toUpperCase()+T.status.slice(1),1,null),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},e("div",null,{class:"flex justify-end space-x-2"},[T.invoice_url?e("a",{href:`/api/invoices/view/${T.invoice_url}`},{target:"_blank",rel:"noopener noreferrer",class:"p-1.5 text-slate-600 dark:text-slate-400 hover:text-teal-600 hover:bg-teal-50 dark:hover:text-teal-400 dark:hover:bg-teal-900/20 rounded-full transition-all",title:"View Invoice"},u(de,{class:"h-5 w-5",[t]:{class:t}},3,"T3_3"),1,"T3_4"):e("button",null,{class:"p-1.5 text-slate-400 dark:text-slate-600 rounded-full transition-all cursor-not-allowed",disabled:!0,title:"No invoice uploaded"},u(de,{class:"h-5 w-5",[t]:{class:t}},3,"T3_5"),1,null),u(O,{action:n,children:[e("input",{value:_(T,"id")},{type:"hidden",name:"id"},null,3,null),e("input",{value:_(T,"status")},{type:"hidden",name:"status"},null,3,null),e("button",{title:T.status==="paid"?"Mark as Pending":"Mark as Paid"},{type:"submit",class:"p-1.5 text-slate-600 dark:text-slate-400 hover:text-teal-600 hover:bg-teal-50 dark:hover:text-teal-400 dark:hover:bg-teal-900/20 rounded-full transition-all"},T.status==="paid"?u(me,{class:"h-5 w-5",[t]:{class:t}},3,"T3_6"):u(ue,{class:"h-5 w-5",[t]:{class:t}},3,"T3_7"),1,null)],[t]:{action:t}},1,"T3_8"),u(O,{action:r,children:[e("input",{value:_(T,"id")},{type:"hidden",name:"id"},null,3,null),e("button",null,{type:"submit",class:"p-1.5 text-slate-600 dark:text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:text-red-400 dark:hover:bg-red-900/20 rounded-full transition-all",title:"Delete Invoice"},u(pe,{class:"h-5 w-5",[t]:{class:t}},3,"T3_9"),1,null)],[t]:{action:t}},1,"T3_10")],1,null),1,null)],1,T.id))),1,null)],1,null),1,null),M.value.length===0&&e("div",null,{class:"px-6 py-12 text-center"},e("p",null,{class:"text-slate-500 dark:text-slate-400 font-medium"},"No invoices found.",3,null),3,"T3_11")],1,null)],1,null),a.value&&e("div",null,{class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},e("div",null,{class:"flex items-end sm:items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},[e("div",null,{class:"fixed inset-0 bg-slate-700/70 dark:bg-slate-900/80 backdrop-blur-md transition-opacity","aria-hidden":"true",onClick$:h("s_uGSf4oJ6SJQ",[a])},null,3,null),e("div",null,{class:"inline-block align-bottom bg-white/95 dark:bg-slate-800/95 backdrop-blur-md rounded-xl text-left overflow-hidden shadow-2xl transform transition-all border border-slate-100/50 dark:border-slate-700/50 sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},u(O,{action:s,onSubmitCompleted$:f(ks,"s_EU50MZy0BNs",[s,y,a]),children:[e("div",null,{class:"px-6 pt-5 pb-4 sm:p-6 sm:pb-4"},[e("h3",null,{class:"text-xl leading-6 font-medium text-slate-800 dark:text-slate-100",id:"modal-title"},"Add New Invoice",3,null),e("div",null,{class:"mt-4 space-y-4"},[e("div",null,null,[e("label",null,{for:"contractId",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Contract",3,null),e("select",null,{name:"contractId",id:"contractId",value:o,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",onInput$:h("s_gV4M91Oagjs",[o])},[e("option",null,{value:""},"Select a contract",3,null),l.value.contracts.map(T=>e("option",{value:_(T,"id")},null,`${T.professional_name} (${z(T.start_date)})`,1,T.id))],1,null),((te=(H=s.value)==null?void 0:H.fieldErrors)==null?void 0:te.contractId)&&e("p",null,{class:"text-red-500 text-sm mt-1"},b(T=>T.value.fieldErrors.contractId[0],[s],"p0.value.fieldErrors.contractId[0]"),3,"T3_12")],1,null),e("div",null,{class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},[e("div",null,null,[e("label",null,{for:"issueDate",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Issue Date",3,null),e("input",null,{type:"date",name:"issueDate",id:"issueDate",value:d,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",onInput$:h("s_ae1ZGRqvTnM",[d])},null,3,null),((ie=(fe=s.value)==null?void 0:fe.fieldErrors)==null?void 0:ie.issueDate)&&e("p",null,{class:"text-red-500 text-sm mt-1"},b(T=>T.value.fieldErrors.issueDate[0],[s],"p0.value.fieldErrors.issueDate[0]"),3,"T3_13")],1,null),e("div",null,null,[e("label",null,{for:"amount",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Amount",3,null),e("input",null,{type:"number",name:"amount",id:"amount",value:m,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",onInput$:h("s_oqM2x05LSOg",[m])},null,3,null),((q=(k=s.value)==null?void 0:k.fieldErrors)==null?void 0:q.amount)&&e("p",null,{class:"text-red-500 text-sm mt-1"},b(T=>T.value.fieldErrors.amount[0],[s],"p0.value.fieldErrors.amount[0]"),3,"T3_14")],1,null)],1,null),e("div",null,{class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},[e("div",null,null,[e("label",null,{for:"currency",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Currency",3,null),e("select",null,{name:"currency",id:"currency",value:c,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",onInput$:h("s_5or9uINNTRc",[c])},[e("option",null,null,"USD",3,null),e("option",null,null,"EUR",3,null),e("option",null,null,"KNRT",3,null)],3,null)],3,null),e("div",null,null,[e("label",null,{for:"status",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Status",3,null),e("select",null,{name:"status",id:"status",value:x,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",onInput$:h("s_6e4iQEdCYJU",[x])},[e("option",null,{value:"pending"},"Pending",3,null),e("option",null,{value:"paid"},"Paid",3,null)],3,null)],3,null)],3,null),e("div",null,null,[e("label",null,{class:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1"},"Invoice Document (PDF/Image)",3,null),C.value?e("div",null,{class:"mt-2"},[e("div",null,{class:"relative h-64 w-full rounded-lg border border-slate-300 dark:border-slate-600 overflow-hidden group"},[C.value.startsWith("blob:http")&&e("iframe",null,{src:b(T=>T.value,[C],"p0.value"),class:"h-full w-full",title:"Invoice Preview"},null,3,"T3_15"),e("a",null,{href:b(T=>T.value,[C],"p0.value"),target:"_blank",rel:"noopener noreferrer",class:"absolute top-2 right-2 p-2 bg-slate-700/50 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Open in new tab"},u(Je,{class:"h-5 w-5",[t]:{class:t}},3,"T3_16"),1,null)],1,null),e("button",null,{type:"button",class:"mt-2 inline-flex items-center text-sm font-medium text-red-600 hover:text-red-800 dark:text-red-500 dark:hover:text-red-400",onClick$:h("s_fM3VT6rrliw",[L,C,v])},[u(sl,{class:"mr-1.5 h-4 w-4",[t]:{class:t}},3,"T3_17"),"Remove Document"],1,null)],1,"T3_18"):e("div",null,{class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 dark:border-slate-600 border-dashed rounded-lg"},e("div",null,{class:"space-y-1 text-center"},[R.value?u(G,{class:"mx-auto h-12 w-12 text-slate-400 animate-spin",[t]:{class:t}},3,"T3_19"):u(el,{class:"mx-auto h-12 w-12 text-slate-400",[t]:{class:t}},3,"T3_20"),e("div",null,{class:"flex text-sm text-slate-600 dark:text-slate-400"},[e("label",null,{for:"file-upload",class:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-teal-600 dark:text-teal-500 hover:text-teal-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-teal-500"},[e("span",null,null,"Upload a file",3,null),e("input",{ref:L},{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",accept:"application/pdf,image/*",disabled:b(T=>T.value,[R],"p0.value"),onChange$:A},null,3,null)],1,null),e("p",null,{class:"pl-1"},"or drag and drop",3,null)],1,null),e("p",null,{class:"text-xs text-slate-500 dark:text-slate-500"},"PDF, PNG, JPG up to 10MB",3,null)],1,null),1,null),w.value&&e("p",null,{class:"mt-2 text-sm text-red-600 dark:text-red-500"},b(T=>T.value,[w],"p0.value"),3,"T3_21"),e("input",null,{type:"hidden",name:"invoiceUrl",value:b(T=>T.value??"",[v],'p0.value??""')},null,3,null)],1,null)],1,null)],1,null),e("div",null,{class:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-800 px-6 py-4 sm:flex sm:flex-row-reverse"},[e("button",null,{type:"submit",disabled:b((T,se)=>T.isRunning||se.value,[s,R],"p0.isRunning||p1.value"),class:"w-full inline-flex justify-center items-center rounded-lg border border-transparent shadow-sm px-5 py-2.5 bg-gradient-to-r from-teal-500 to-teal-600 text-base font-medium text-white hover:from-teal-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:ml-3 sm:w-auto sm:text-sm transition-all duration-200 disabled:opacity-50"},[s.isRunning?u(G,{class:"animate-spin h-5 w-5 mr-2",[t]:{class:t}},3,"T3_22"):u(ee,{class:"h-5 w-5 mr-2",[t]:{class:t}},3,"T3_23"),"Save Invoice"],1,null),e("button",null,{type:"button",class:"mt-3 w-full inline-flex justify-center items-center rounded-lg border border-slate-200 dark:border-slate-600 shadow-sm px-5 py-2.5 bg-white dark:bg-slate-800 text-base font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-all duration-200",onClick$:h("s_SUoZcR3RUO0",[y,a])},[u(le,{class:"h-5 w-5 mr-2",[t]:{class:t}},3,"T3_24"),"Cancel"],1,null)],1,null),((D=s.value)==null?void 0:D.success)===!1&&e("div",null,{class:"p-4 bg-red-100 text-red-800 rounded-b-lg"},[u(W,{class:"inline h-5 w-5 mr-2",[t]:{class:t}},3,"T3_25"),b(T=>T.value.error,[s],"p0.value.error")],1,"T3_26")],[t]:{action:t,onSubmitCompleted$:t}},1,"T3_27"),1,null)],1,null),1,"T3_28")],1,"T3_29")},_s=B(f(ys,"s_a5XSqTax3Rc")),Ts=Object.freeze(Object.defineProperty({__proto__:null,default:_s,useAddInvoice:fl,useDeleteInvoice:gl,useInvoicesLoader:pl,useUpdateInvoiceStatus:xl},Symbol.toStringTag,{value:"Module"}));function K(l,s){const r=new Intl.NumberFormat("es-ES",{style:"currency",currency:s==="KNRT"?"EUR":s,minimumFractionDigits:2}).format(l);return s==="KNRT"?r.replace("","KNRT"):r}const Pe=[{inputs:[{internalType:"address",name:"_registry",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"SafeERC20FailedOperation",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"lockId",type:"uint256"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"releaseTime",type:"uint256"},{indexed:!1,internalType:"address[]",name:"recipients",type:"address[]"},{indexed:!1,internalType:"uint256[]",name:"amounts",type:"uint256[]"}],name:"LockCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"lockId",type:"uint256"}],name:"LockReleased",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"address",name:"linkToken",type:"address"},{internalType:"address",name:"to",type:"address"}],name:"cancelUpkeepAndWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"",type:"bytes"}],name:"checkUpkeep",outputs:[{internalType:"bool",name:"upkeepNeeded",type:"bool"},{internalType:"bytes",name:"performData",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"totalAmount",type:"uint256"},{internalType:"address[]",name:"recipients",type:"address[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"uint256",name:"releaseTime",type:"uint256"}],name:"createLock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenAddress",type:"address"},{internalType:"address",name:"to",type:"address"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"forwarder",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllLocks",outputs:[{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"address[]",name:"tokens",type:"address[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"uint256[]",name:"releaseTimes",type:"uint256[]"},{internalType:"bool[]",name:"released",type:"bool[]"},{internalType:"address[][]",name:"recipients",type:"address[][]"},{internalType:"uint256[][]",name:"recipientAmounts",type:"uint256[][]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"locks",outputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"releaseTime",type:"uint256"},{internalType:"bool",name:"released",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextLockId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"",type:"bytes"}],name:"performUpkeep",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"registry",outputs:[{internalType:"contract AutomationRegistryInterface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_forwarder",type:"address"}],name:"setForwarderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_id",type:"uint256"}],name:"setUpkeepId",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"upkeepId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"linkToken",type:"address"},{internalType:"address",name:"to",type:"address"}],name:"withdrawAllLink",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"linkToken",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawLink",outputs:[],stateMutability:"nonpayable",type:"function"}],Ee={id:1337,name:"DazLabs",network:"dazlabs",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["http://192.168.50.59:8545"]}},blockExplorers:{default:{name:"Local Explorer",url:"http://192.168.50.59:8545"}},testnet:!0};function Es(l){return!l||typeof l!="string"||l.length<10?l||"":l.slice(0,6)+"..."+l.slice(-4)}const Ss=async()=>{const[l,s,n]=N();if(!window.ethereum){s.value="MetaMask no detectado";return}try{const r=await window.ethereum.request({method:"eth_requestAccounts"});l.value=r[0],n.value="Conectado: "+Es(r[0]),s.value=""}catch(r){s.value=r.message||"Error al conectar MetaMask"}},Ls=async(l,s,n,r,a)=>{const[i,o,d,m]=N();if(d.value="",m.value="",!o.value)return d.value="Conecta MetaMask primero";try{if(!l||!s||!n||!r||!a){d.value="Completa todos los campos";return}const c=n.split(",").map(M=>M.trim()),x=r.split(",").map(M=>M.trim()).map(Number);if(c.length!==x.length){d.value="recipients y amounts deben tener la misma longitud";return}const v=18,C=Fe(s,v),R=Xe({chain:$l,transport:We(window.ethereum)});await R.writeContract({address:l,abi:[{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],functionName:"approve",args:[i,C],account:o.value});const w=Math.floor(Date.now()/1e3),L=Number(a);if(L<=w){d.value="releaseTime debe ser futuro (timestamp unix)";return}await R.writeContract({address:i,abi:Pe,functionName:"createLock",args:[l,C,c,x.map(M=>Fe(M.toString(),v)),L],account:o.value}),m.value="Lock creado correctamente",d.value="",await loadLocks()}catch(c){d.value=c.message||"Error al crear lock"}},Cs=async()=>{const[l,s,n,r]=N();n.value=!0;try{const i=await jl({chain:Ee,transport:Fl(Ee.rpcUrls.default.http[0])}).readContract({address:l,abi:Pe,functionName:"getAllLocks"}),[o,d,m,c,x,v,C]=i,R=(o||[]).map((w,L)=>({id:w,token:d[L],totalAmount:m[L],releaseTime:c[L],released:x[L],recipients:v[L],amounts:C[L]}));r.value=R}catch(a){s.value=a.message||"Error al leer locks"}n.value=!1},Rs=async()=>{const[l,s,n,r,a]=N();if(!s.value)return n.value="Conecta MetaMask primero";try{await Xe({chain:Ee,transport:We(window.ethereum)}).writeContract({address:l,abi:Pe,functionName:"performUpkeep",args:["0x"],account:s.value}),a.value="performUpkeep ejecutado",await r()}catch(i){n.value=i.message||"Error en performUpkeep"}};function As(){const l=g(null),s=g(""),n=g(""),r=g([]),a=g(!1),i=f(Ss,"s_81MCpzm7a6o",[l,n,s]),o="0x5FbDB2315678afecb367f032d93F642f64180aa3",d=f(Ls,"s_Nk78oOdFUOs",[o,l,n,s]),m=f(Cs,"s_nugdMjWhp0M",[o,n,a,r]);return{address:l,status:s,error:n,locks:r,loadingLocks:a,connect:i,createLock:d,loadLocks:m,performUpkeep:f(Rs,"s_03RWAw0emAM",[o,l,n,m,s])}}const Ns={USD:"0x7EA2be2df7BA6E54B1A9C70676f668455E329d29",EUR:"0x9dB4B94349CaDE7c4A3985B80c4C3Dd46f3581e1"};function hl(l){return Ns[l]||""}const Is=async l=>{const s=I(l),n=new URL(l.request.url),r=n.searchParams.get("month")||(new Date().getMonth()+1).toString(),a=n.searchParams.get("year")||new Date().getFullYear().toString(),i=`${a}-${String(r).padStart(2,"0")}-01`,d=new Date(Number(a),Number(r),0).getDate(),m=`${a}-${String(r).padStart(2,"0")}-${String(d).padStart(2,"0")}`,c=await s.execute({sql:`
      SELECT p.id, p.professional_id, prof.name as professional_name, p.amount, p.currency, p.status, p.due_date, p.description
      FROM payments p
      JOIN professionals prof ON p.professional_id = prof.id
      WHERE p.due_date BETWEEN ? AND ?
      ORDER BY p.due_date ASC
    `,args:[i,m]}),x=await s.execute("SELECT id, name FROM professionals ORDER BY name");return{payments:c.rows.map(v=>({...v,amount:Number(v.amount)})),professionals:x.rows,currentMonth:Number(r),currentYear:Number(a)}},bl=V(f(Is,"s_s6FoNBLF0yg")),Ms=async(l,s)=>{const n=await Y(s);if(!n.isAuthenticated||!n.userId)return{success:!1,error:"Unauthorized"};const r=I(s),{id:a,professional_id:i,amount:o,currency:d,due_date:m,description:c}=l;try{return a?await r.execute({sql:"UPDATE payments SET professional_id = ?, amount = ?, currency = ?, due_date = ?, description = ? WHERE id = ?",args:[i,o,d,m,c||null,a]}):await r.execute({sql:"INSERT INTO payments (professional_id, user_id, amount, currency, status, due_date, description) VALUES (?, ?, ?, ?, ?, ?, ?)",args:[i,n.userId,o,d,"pending",m,c||null]}),{success:!0}}catch(x){return console.error(x),{success:!1,error:"Failed to save payment."}}},Ds={id:E.coerce.number().optional(),professional_id:E.coerce.number(),amount:E.coerce.number().positive(),currency:E.string(),due_date:E.string(),description:E.string().optional()},vl=U(f(Ms,"s_XgvIlAoR1Uc"),X(f(Ds,"s_5hhdmTOQc4Y"))),Us=async({id:l,status:s},n)=>{const r=I(n),a=s==="paid"?"pending":"paid",i=a==="paid"?new Date().toISOString().split("T")[0]:null;try{return await r.execute({sql:"UPDATE payments SET status = ?, payment_date = ? WHERE id = ?",args:[a,i,l]}),{success:!0}}catch{return{success:!1,error:"Failed to process payment."}}},Os={id:E.coerce.number(),status:E.enum(["pending","paid"])},wl=U(f(Us,"s_VNsZdI3vMNs"),X(f(Os,"s_R1OHWHmN4Pg"))),Ps=async({id:l},s)=>{const n=I(s);try{return await n.execute({sql:"DELETE FROM payments WHERE id = ?",args:[l]}),{success:!0}}catch{return{success:!1,error:"Failed to delete payment."}}},js={id:E.coerce.number()},kl=U(f(Ps,"s_gYtsTIZGnjo"),X(f(js,"s_76eZ6aCV60M"))),Fs=l=>{const[s,n]=N();let r=s.value+l,a=n.value;r>12?(r=1,a++):r<1&&(r=12,a--);const i=new URL(window.location.href);i.searchParams.set("month",r.toString()),i.searchParams.set("year",a.toString()),window.location.href=i.toString()},$s=(l,s=null)=>{const[n,r,a,i,o,d,m,c,x]=N();if(s)m.value=s.id,c.value=String(s.professional_id),a.value=String(s.amount),i.value=s.currency,d.value=s.due_date,o.value=s.description||"";else if(l){const v=new Date(r.value,n.value-1,l);m.value=void 0,c.value="",a.value="",i.value="USD",d.value=v.toISOString().split("T")[0],o.value=""}x.value=!0},qs=l=>{const s=new Date(l);return Math.floor(s.getTime()/1e3)},Bs=async l=>{const[s,n,r]=N();if(!r.address.value){r.connect();return}const a=hl(l.currency);if(!a){r.error.value=`No se ha configurado el token para ${l.currency}`;return}const i=(await s(l.due_date)).toString();r.createLock(a,l.amount.toString(),l.professional_id.toString(),l.amount.toString(),i),n.value=!0},Ys=async()=>{const[l,s,n,r]=N();if(!r.address.value){r.connect();return}const a=s.value.payments.filter(o=>o.status==="pending");if(a.length===0){r.error.value="No hay pagos pendientes para crear timelocks";return}const i={};a.forEach(o=>{const d=`${o.professional_id}_${o.due_date}_${o.currency}`;i[d]||(i[d]=[]),i[d].push(o)}),await Promise.all(Object.values(i).map(async o=>{if(o.length>0){const d=o[0],m=hl(d.currency);if(!m){r.error.value=`No se ha configurado el token para ${d.currency}`;return}const c=o.reduce((v,C)=>v+C.amount,0).toString(),x=(await l(d.due_date)).toString();r.createLock(m,c,d.professional_id.toString(),c,x)}})),n.value=!0},zs=()=>{var n;const[l,s]=N();(n=l.value)!=null&&n.success&&(s.value=!1)},Vs=()=>{var ie;F();const l=bl(),s=vl(),n=wl(),r=kl(),a=As(),i=g(!1);g(""),g("USDC");const o=g(!1);Le(h("s_9p09Nr0kbzs",[i,a]));const d=g(!1),m=g(),c=g(""),x=g(""),v=g("USD"),C=g(""),R=g(""),w=g(l.value.currentMonth),L=g(l.value.currentYear),M=new Date(L.value,w.value,0).getDate(),P=new Date(L.value,w.value-1,1).getDay(),j=[...Array.from({length:P},()=>null),...Array.from({length:M},(k,q)=>q+1)],y=f(Fs,"s_TUznumlWyPE",[w,L]),A=f($s,"s_0pP60mX9xb8",[w,L,x,v,R,C,m,c,d]),z=(k,q)=>new Date(q,k-1).toLocaleString("default",{month:"long",year:"numeric"}),p=f(qs,"s_ve7BpfRVPxE"),H=f(Bs,"s_G6m7BxH9ncw",[p,o,a]),te=f(Ys,"s_BArC0LO0WQE",[p,l,o,a]),fe=k=>{const q=new Date(Number(k)*1e3);return q.toLocaleDateString()+" "+q.toLocaleTimeString()};return e("main",null,{class:"min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900"},[e("div",null,{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},[e("header",null,{class:"mb-8 bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-800 dark:to-slate-700 rounded-xl shadow-sm p-6"},e("div",null,{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},[e("div",null,{class:"flex items-center"},[u(Ne,{class:"h-8 w-8 text-teal-600 dark:text-teal-500 mr-3",[t]:{class:t}},3,"Lq_0"),e("div",null,null,[e("h1",null,{class:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100"},"Payment Scheduler",3,null),e("p",null,{class:"text-slate-500 dark:text-slate-400 mt-1"},"Plan and manage future payments",3,null)],3,null)],1,null),e("div",null,{class:"flex items-center mt-4 sm:mt-0 space-x-4"},[e("div",null,null,e("button",null,{class:"inline-flex items-center px-4 py-2 rounded-lg bg-gradient-to-r from-indigo-500 to-purple-500 text-white font-medium text-sm shadow-md hover:from-indigo-600 hover:to-purple-600 transition-all",onClick$:h("s_cAYREhDW9X4",[i,a])},a.address.value?u(ke,{children:[u(qe,{class:"h-5 w-5 mr-2",[t]:{class:t}},3,"Lq_1")," ",b(k=>k.value?"Ocultar Timelocks":"Ver Timelocks",[i],'p0.value?"Ocultar Timelocks":"Ver Timelocks"')]},1,"Lq_2"):u(ke,{children:[u(rt,{class:"h-5 w-5 mr-2",[t]:{class:t}},3,"Lq_3")," Conectar Wallet"]},1,"Lq_4"),1,null),1,null),e("div",null,{class:"flex items-center"},[e("button",null,{class:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 transition-all",onClick$:h("s_KKrChNx80lI",[y])},u(Ie,{class:"h-6 w-6 text-slate-600 dark:text-slate-300",[t]:{class:t}},3,"Lq_5"),1,null),e("h2",null,{class:"w-48 text-center text-lg font-semibold text-slate-700 dark:text-slate-200"},z(w.value,L.value),1,null),e("button",null,{class:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 transition-all",onClick$:h("s_mLWCT0ELoNg",[y])},u(Me,{class:"h-6 w-6 text-slate-600 dark:text-slate-300",[t]:{class:t}},3,"Lq_6"),1,null)],1,null)],1,null)],1,null),1,null),a.address.value&&i.value&&e("div",null,{class:"mb-8 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/30 dark:to-purple-900/30 rounded-xl shadow-md p-6 border border-indigo-100 dark:border-indigo-800/50"},[e("div",null,{class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4"},[e("div",null,null,[e("div",null,{class:"flex items-center"},[u(ne,{class:"h-6 w-6 text-indigo-600 dark:text-indigo-400 mr-2",[t]:{class:t}},3,"Lq_7"),e("h2",null,{class:"text-xl font-bold text-slate-800 dark:text-slate-200"},"TimeLock Smart Contract",3,null)],1,null),e("p",null,{class:"text-sm text-slate-600 dark:text-slate-400"},["Wallet: ",b(k=>k.address.value,[a],"p0.address.value")],3,null)],1,null),e("div",null,{class:"mt-4 sm:mt-0 space-x-2"},[e("button",{onClick$:a.loadLocks},{class:"inline-flex items-center px-3 py-1.5 rounded-lg bg-indigo-100 hover:bg-indigo-200 dark:bg-indigo-900/50 dark:hover:bg-indigo-800/70 text-indigo-700 dark:text-indigo-300 text-sm transition-all"},[u(lt,{get class(){return`h-4 w-4 mr-1.5 ${a.loadingLocks.value?"animate-spin":""}`},[t]:{class:b(k=>`h-4 w-4 mr-1.5 ${k.loadingLocks.value?"animate-spin":""}`,[a],'`h-4 w-4 mr-1.5 ${p0.loadingLocks.value?"animate-spin":""}`')}},3,"Lq_8")," Refrescar"],0,null),e("button",null,{class:"inline-flex items-center px-3 py-1.5 rounded-lg bg-purple-100 hover:bg-purple-200 dark:bg-purple-900/50 dark:hover:bg-purple-800/70 text-purple-700 dark:text-purple-300 text-sm transition-all",onClick$:te},[u(ne,{class:"h-4 w-4 mr-1.5",[t]:{class:t}},3,"Lq_9")," Crear Timelocks en Lote"],1,null),e("button",{onClick$:a.performUpkeep},{class:"inline-flex items-center px-3 py-1.5 rounded-lg bg-emerald-100 hover:bg-emerald-200 dark:bg-emerald-900/50 dark:hover:bg-emerald-800/70 text-emerald-700 dark:text-emerald-300 text-sm transition-all"},[u(qe,{class:"h-4 w-4 mr-1.5",[t]:{class:t}},3,"Lq_10")," Ejecutar Pagos"],0,null)],1,null)],1,null),a.error.value&&e("div",null,{class:"mt-2 p-2 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg text-sm"},[u(W,{class:"inline-block h-4 w-4 mr-1",[t]:{class:t}},3,"Lq_11")," ",b(k=>k.error.value,[a],"p0.error.value")],1,"Lq_12"),a.status.value&&e("div",null,{class:"mt-2 p-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded-lg text-sm"},[u(ue,{class:"inline-block h-4 w-4 mr-1",[t]:{class:t}},3,"Lq_13")," ",b(k=>k.status.value,[a],"p0.status.value")],1,"Lq_14"),e("div",null,{class:"mt-4 overflow-auto rounded-lg border border-slate-200 dark:border-slate-700/50"},e("table",null,{class:"w-full bg-white dark:bg-slate-800/50 text-left text-sm"},[e("thead",null,{class:"bg-slate-50 dark:bg-slate-700/50"},e("tr",null,null,[e("th",null,{class:"px-4 py-3 text-slate-600 dark:text-slate-300 font-semibold"},"ID",3,null),e("th",null,{class:"px-4 py-3 text-slate-600 dark:text-slate-300 font-semibold"},"Token",3,null),e("th",null,{class:"px-4 py-3 text-slate-600 dark:text-slate-300 font-semibold"},"Monto",3,null),e("th",null,{class:"px-4 py-3 text-slate-600 dark:text-slate-300 font-semibold"},"Fecha Liberacin",3,null),e("th",null,{class:"px-4 py-3 text-slate-600 dark:text-slate-300 font-semibold"},"Estado",3,null),e("th",null,{class:"px-4 py-3 text-slate-600 dark:text-slate-300 font-semibold"},"Destinatarios",3,null)],3,null),3,null),e("tbody",null,{class:"divide-y divide-slate-200 dark:divide-slate-700/50"},a.loadingLocks.value?e("tr",null,null,e("td",null,{colSpan:6,class:"px-4 py-6 text-center text-slate-500 dark:text-slate-400"},[u(G,{class:"animate-spin h-6 w-6 mx-auto mb-2",[t]:{class:t}},3,"Lq_15"),"Cargando locks..."],1,null),1,"Lq_16"):a.locks.value.length===0?e("tr",null,null,e("td",null,{colSpan:6,class:"px-4 py-6 text-center text-slate-500 dark:text-slate-400"},"No hay locks creados an.",3,null),3,"Lq_17"):a.locks.value.map(k=>e("tr",null,{class:"hover:bg-slate-50 dark:hover:bg-slate-700/30"},[e("td",null,{class:"px-4 py-3 text-slate-700 dark:text-slate-300"},_(k,"id"),1,null),e("td",null,{class:"px-4 py-3 text-slate-700 dark:text-slate-300"},[k.token.slice(0,6),"...",k.token.slice(-4)],1,null),e("td",null,{class:"px-4 py-3 text-slate-700 dark:text-slate-300"},k.totalAmount.toString(),1,null),e("td",null,{class:"px-4 py-3 text-slate-700 dark:text-slate-300"},fe(k.releaseTime),1,null),e("td",null,{class:"px-4 py-3"},e("span",{class:`px-2 py-1 rounded-full text-xs font-medium ${k.released?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300"}`},null,k.released?"Liberado":"Pendiente",1,null),1,null),e("td",null,{class:"px-4 py-3 text-slate-700 dark:text-slate-300"},k.recipients.map((q,D)=>e("div",null,{class:"text-xs"},[q.slice(0,6),"...",q.slice(-4)," (",k.amounts[D].toString(),")"],1,D)),1,null)],1,k.id)),1,null)],1,null),1,null)],1,"Lq_18"),e("div",null,{class:"grid grid-cols-7 gap-px bg-slate-200 dark:bg-slate-700 border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden shadow-lg"},[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(k=>e("div",null,{class:"text-center py-2 bg-slate-100 dark:bg-slate-800 text-xs font-bold text-slate-600 dark:text-slate-300 uppercase"},k,1,k)),j.map((k,q)=>F(e("div",{class:`relative min-h-[120px] bg-white dark:bg-slate-800/50 p-2 ${k?"hover:bg-slate-50 dark:hover:bg-slate-700/50":"bg-slate-50 dark:bg-slate-800/80"}`},null,k&&u(ke,{children:[e("span",null,{class:"text-sm font-semibold text-slate-700 dark:text-slate-300"},k,1,null),e("button",{onClick$:h("s_sMGwuizzM3E",[k,A])},{class:"absolute top-1 right-1 h-6 w-6 flex items-center justify-center rounded-full text-slate-400 hover:bg-teal-100 hover:text-teal-600 dark:hover:bg-teal-900/50 dark:hover:text-teal-400 transition-all"},u(oe,{class:"h-4 w-4",[t]:{class:t}},3,"Lq_19"),0,null),e("div",null,{class:"mt-2 space-y-1"},l.value.payments.filter(D=>new Date(D.due_date+"T00:00:00").getDate()===k).map(D=>F(e("div",{class:`p-1.5 rounded-lg text-xs cursor-pointer group ${D.status==="paid"?"bg-emerald-50 dark:bg-emerald-900/30":"bg-amber-50 dark:bg-amber-900/30"}`},null,[e("p",{class:`font-semibold truncate ${D.status==="paid"?"text-emerald-800 dark:text-emerald-300":"text-amber-800 dark:text-amber-300"}`},null,_(D,"professional_name"),1,null),e("p",{class:`truncate ${D.status==="paid"?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"}`},null,K(D.amount,D.currency),1,null),e("div",null,{class:"hidden group-hover:flex items-center justify-end space-x-1 mt-1"},[e("button",{onClick$:h("s_YzyyCDyxLTY",[k,A,D])},{class:"p-1 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600"},u(Ue,{class:"h-3 w-3 text-slate-600 dark:text-slate-300",[t]:{class:t}},3,"Lq_20"),0,null),a.address.value&&D.status==="pending"&&e("button",{onClick$:h("s_UzPKQ2Q5D58",[H,D])},{class:"p-1 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600"},u(ne,{class:"h-3 w-3 text-indigo-600 dark:text-indigo-400",[t]:{class:t}},3,"Lq_21"),0,"Lq_22"),u(O,{action:n,children:[e("input",{value:_(D,"id")},{type:"hidden",name:"id"},null,3,null),e("input",{value:_(D,"status")},{type:"hidden",name:"status"},null,3,null),e("button",null,{type:"submit",class:"p-1 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600"},D.status==="paid"?u(me,{class:"h-3 w-3 text-yellow-600",[t]:{class:t}},3,"Lq_23"):u(ue,{class:"h-3 w-3 text-green-600",[t]:{class:t}},3,"Lq_24"),1,null)],[t]:{action:t}},1,"Lq_25")],1,null)],1,D.id))),1,null)]},1,"Lq_26"),1,q)))],1,null)],1,null),d.value&&e("div",null,{class:"fixed inset-0 z-50 overflow-y-auto"},e("div",null,{class:"flex items-end sm:items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},[e("div",null,{class:"fixed inset-0 bg-slate-700/70 dark:bg-slate-900/80 backdrop-blur-md transition-opacity","aria-hidden":"true",onClick$:h("s_MseIsWMHryY",[d])},null,3,null),e("div",null,{class:"inline-block align-bottom bg-white/95 dark:bg-slate-800/95 backdrop-blur-md rounded-xl text-left overflow-hidden shadow-2xl transform transition-all border border-slate-100/50 dark:border-slate-700/50 sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},u(O,{action:s,onSubmitCompleted$:f(zs,"s_ytGGNMtamRo",[s,d]),children:[e("div",null,{class:"px-6 pt-5 pb-4 sm:p-6 sm:pb-4"},[e("h3",null,{class:"text-xl leading-6 font-medium text-slate-800 dark:text-slate-100"},[b(k=>k.value?"Edit":"Schedule",[m],'p0.value?"Edit":"Schedule"')," Payment"],3,null),e("input",null,{type:"hidden",name:"id",value:b(k=>k.value,[m],"p0.value")},null,3,null),e("div",null,{class:"mt-4 space-y-4"},[e("div",null,null,[e("label",null,{for:"professional_id",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Professional",3,null),e("select",null,{name:"professional_id",id:"professional_id",value:c,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",onInput$:h("s_xyRXkU0XAu4",[c])},[e("option",null,{value:""},"Select Professional",3,null),l.value.professionals.map(k=>e("option",{value:_(k,"id")},null,k.name,1,k.id))],1,null)],1,null),e("div",null,{class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[e("div",null,null,[e("label",null,{for:"amount",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Amount",3,null),e("input",null,{type:"number",name:"amount",id:"amount",value:x,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",onInput$:h("s_dYqD2EO6CuI",[x])},null,3,null)],3,null),e("div",null,null,[e("label",null,{for:"currency",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Currency",3,null),e("select",null,{name:"currency",id:"currency",value:v,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",onInput$:h("s_N07FfyRUgFE",[v])},[e("option",null,null,"USD",3,null),e("option",null,null,"EUR",3,null)],3,null)],3,null)],3,null),e("div",null,null,[e("label",null,{for:"due_date",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Due Date",3,null),e("input",null,{type:"date",name:"due_date",id:"due_date",value:C,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",onInput$:h("s_nEFXbRktjiI",[C])},null,3,null)],3,null),e("div",null,null,[e("label",null,{for:"description",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Description",3,null),e("textarea",null,{name:"description",id:"description",rows:3,value:R,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",onInput$:h("s_0g53Fas7k3k",[R])},null,3,null)],3,null)],1,null)],1,null),e("div",null,{class:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-800 px-6 py-4 flex justify-between items-center"},[e("div",null,null,m.value&&u(O,{action:r,class:"inline-block",children:[e("input",null,{type:"hidden",name:"id",value:b(k=>k.value,[m],"p0.value")},null,3,null),e("button",null,{type:"submit",class:"inline-flex items-center text-red-600 hover:text-red-800 dark:text-red-500 dark:hover:text-red-400 font-medium text-sm"},[u(pe,{class:"h-4 w-4 mr-1.5",[t]:{class:t}},3,"Lq_27")," Delete"],1,null)],[t]:{action:t,class:t}},1,"Lq_28"),1,null),e("div",null,{class:"flex items-center"},[e("button",null,{type:"button",class:"inline-flex justify-center items-center rounded-lg border border-slate-200 dark:border-slate-600 shadow-sm px-5 py-2.5 bg-white dark:bg-slate-800 text-base font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:w-auto sm:text-sm transition-all",onClick$:h("s_jJbiMziovcs",[d])},[u(le,{class:"h-5 w-5 mr-2",[t]:{class:t}},3,"Lq_29")," Cancel"],1,null),e("button",null,{type:"submit",disabled:b(k=>k.isRunning,[s],"p0.isRunning"),class:"ml-3 w-full inline-flex justify-center items-center rounded-lg border border-transparent shadow-sm px-5 py-2.5 bg-gradient-to-r from-teal-500 to-teal-600 text-base font-medium text-white hover:from-teal-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:w-auto sm:text-sm transition-all disabled:opacity-50"},[s.isRunning?u(G,{class:"animate-spin h-5 w-5 mr-2",[t]:{class:t}},3,"Lq_30"):u(ee,{class:"h-5 w-5 mr-2",[t]:{class:t}},3,"Lq_31"),"Save"],1,null)],1,null)],1,null),((ie=s.value)==null?void 0:ie.success)===!1&&e("div",null,{class:"p-4 bg-red-100 text-red-800 rounded-b-lg"},[u(W,{class:"inline h-5 w-5 mr-2",[t]:{class:t}},3,"Lq_32")," ",b(k=>k.value.error,[s],"p0.value.error")],1,"Lq_33")],[t]:{action:t,onSubmitCompleted$:t}},1,"Lq_34"),1,null)],1,null),1,"Lq_35"),o.value&&e("div",null,{class:"fixed inset-0 z-50 overflow-y-auto"},e("div",null,{class:"flex items-end sm:items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},[e("div",null,{class:"fixed inset-0 bg-slate-700/70 dark:bg-slate-900/80 backdrop-blur-md transition-opacity","aria-hidden":"true",onClick$:h("s_6wIlJegccMM",[o])},null,3,null),e("div",null,{class:"inline-block align-bottom bg-white/95 dark:bg-slate-800/95 backdrop-blur-md rounded-xl text-left overflow-hidden shadow-2xl transform transition-all border border-slate-100/50 dark:border-slate-700/50 sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},[e("div",null,{class:"px-6 pt-5 pb-4 sm:p-6 sm:pb-4"},[e("h3",null,{class:"text-xl leading-6 font-medium text-slate-800 dark:text-slate-100"},[u(ne,{class:"inline-block h-6 w-6 mr-2 text-indigo-600 dark:text-indigo-400",[t]:{class:t}},3,"Lq_36"),"Estado del TimeLock"],1,null),e("div",null,{class:"mt-4 p-4 rounded-lg bg-slate-50 dark:bg-slate-700/30"},a.error.value?e("div",null,{class:"text-red-600 dark:text-red-400"},[u(W,{class:"inline-block h-5 w-5 mr-2",[t]:{class:t}},3,"Lq_37"),b(k=>k.error.value,[a],"p0.error.value")],1,"Lq_38"):a.status.value?e("div",null,{class:"text-green-600 dark:text-green-400"},[u(ue,{class:"inline-block h-5 w-5 mr-2",[t]:{class:t}},3,"Lq_39"),b(k=>k.status.value,[a],"p0.status.value")],1,"Lq_40"):e("div",null,{class:"text-slate-600 dark:text-slate-300 flex items-center"},[u(G,{class:"animate-spin h-5 w-5 mr-2",[t]:{class:t}},3,"Lq_41"),"Procesando operacin..."],1,null),1,null)],1,null),e("div",null,{class:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-800 px-6 py-4 flex justify-end"},e("button",null,{type:"button",class:"inline-flex justify-center items-center rounded-lg border border-slate-200 dark:border-slate-600 shadow-sm px-5 py-2.5 bg-white dark:bg-slate-800 text-base font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:w-auto sm:text-sm transition-all",onClick$:h("s_npouJnMOm4M",[o,i,a])},"Cerrar",3,null),3,null)],1,null)],1,null),1,"Lq_42")],1,"Lq_43")},Hs=B(f(Vs,"s_Yu2aZKZZKQY")),Gs=Object.freeze(Object.defineProperty({__proto__:null,default:Hs,useDeletePayment:kl,usePaymentsLoader:bl,useProcessPayment:wl,useSavePayment:vl},Symbol.toStringTag,{value:"Module"})),Xs=async l=>{const s=I(l),n=new URL(l.request.url),r=new Date,a=parseInt(n.searchParams.get("year")||r.getFullYear().toString()),i=parseInt(n.searchParams.get("month")||(r.getMonth()+1).toString()),o=`${a}-${String(i).padStart(2,"0")}-01`,d=new Date(a,i,0),m=`${a}-${String(i).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`,v=(await s.execute({sql:`
    SELECT 
      i.id,
      p.name as professional_name,
      i.amount,
      i.currency,
      i.status,
      i.issue_date as due_date
    FROM invoices i
    JOIN professionals p ON i.professional_id = p.id
    WHERE i.issue_date >= ? AND i.issue_date <= ?
    ORDER BY i.issue_date ASC
  `,args:[o,m]})).rows.map(L=>({...L,amount:Number(L.amount)})),C=d.getDate(),R=new Date(a,i-1,1).getDay(),w=[];for(let L=0;L<R;L++)w.push({day:null,payments:[]});for(let L=1;L<=C;L++){const M=`${a}-${String(i).padStart(2,"0")}-${String(L).padStart(2,"0")}`,P=v.filter(j=>j.due_date===M);w.push({day:L,payments:P})}return{payments:v,calendarData:w,currentMonth:i,currentYear:a}},yl=V(f(Xs,"s_KLgGdYv9ffA")),Ws=l=>{const[s]=N();let n=s.month,r=s.year;l==="prev"?(n--,n<1&&(n=12,r--)):(n++,n>12&&(n=1,r++));const a=new URL(window.location.href);a.searchParams.set("month",String(n)),a.searchParams.set("year",String(r)),window.location.href=a.toString()},Ks=()=>{const l=yl(),s=Ol({month:l.value.currentMonth,year:l.value.currentYear}),n=l.value.payments.reduce((d,m)=>d+m.amount,0),r=l.value.payments.filter(d=>d.status==="pending").reduce((d,m)=>d+m.amount,0),a=f(Ws,"s_SydKp69OxJo",[s]),i=d=>new Date(s.year,d-1,1).toLocaleString("en-US",{month:"long"}),o=(d,m)=>{if(d===null)return"bg-slate-50 dark:bg-slate-800/50 opacity-50";const c=new Date;c.setHours(0,0,0,0);const x=new Date(s.year,s.month-1,d);let v="bg-white dark:bg-slate-800";x.getTime()<c.getTime()&&(v="bg-slate-100 dark:bg-slate-800/70"),x.getTime()===c.getTime()&&(v="bg-teal-50 dark:bg-teal-900/30 border-teal-400 dark:border-teal-600");const C=m.some(w=>w.status==="pending"),R=m.some(w=>w.status==="paid");return C?`${v} border-l-4 border-amber-400 dark:border-amber-500`:R?`${v} border-l-4 border-emerald-400 dark:border-emerald-500`:v};return e("main",null,{class:"min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900"},e("div",null,{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},[e("header",null,{class:"mb-8 bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-800 dark:to-slate-700 rounded-xl shadow-sm p-6"},e("div",null,{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},[e("div",null,{class:"flex items-center"},[u(Ne,{class:"h-8 w-8 text-teal-600 dark:text-teal-500 mr-3",[t]:{class:t}},3,"Zl_0"),e("div",null,null,[e("h1",null,{class:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100"},"Payment Planner",3,null),e("p",null,{class:"text-slate-500 dark:text-slate-400 mt-1"},"Visualize your monthly financial commitments",3,null)],3,null)],1,null),e("div",null,{class:"flex items-center space-x-2 mt-4 sm:mt-0"},[e("div",null,{class:"inline-flex items-center space-x-1.5 text-xs"},[e("span",null,{class:"w-3 h-3 inline-block bg-amber-400 rounded-full"},null,3,null),e("span",null,{class:"text-slate-600 dark:text-slate-300"},"Pending",3,null)],3,null),e("div",null,{class:"inline-flex items-center space-x-1.5 text-xs"},[e("span",null,{class:"w-3 h-3 inline-block bg-emerald-400 rounded-full"},null,3,null),e("span",null,{class:"text-slate-600 dark:text-slate-300"},"Paid",3,null)],3,null)],3,null)],1,null),1,null),e("div",null,{class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},[e("div",null,{class:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-5 border border-slate-100 dark:border-slate-700"},[e("h3",null,{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Total Payments This Month",3,null),e("p",null,{class:"text-2xl font-bold text-slate-800 dark:text-slate-200"},b(d=>d.value.payments.length,[l],"p0.value.payments.length"),3,null)],3,null),e("div",null,{class:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-5 border border-slate-100 dark:border-slate-700"},[e("h3",null,{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Pending Amount",3,null),e("p",null,{class:"text-2xl font-bold text-amber-600 dark:text-amber-400"},K(r,"USD"),1,null)],1,null),e("div",null,{class:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-5 border border-slate-100 dark:border-slate-700"},[e("h3",null,{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Total Amount",3,null),e("p",null,{class:"text-2xl font-bold text-emerald-600 dark:text-emerald-400"},K(n,"USD"),1,null)],1,null)],1,null),e("div",null,{class:"bg-white dark:bg-slate-800 shadow-lg rounded-xl overflow-hidden border border-slate-200 dark:border-slate-700"},[e("div",null,{class:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700"},[e("button",null,{class:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",onClick$:h("s_yEUHrZlk7e8",[a])},u(Ie,{class:"h-5 w-5 text-slate-600 dark:text-slate-300",[t]:{class:t}},3,"Zl_1"),1,null),e("h2",null,{class:"text-lg font-semibold text-slate-800 dark:text-slate-100"},[i(s.month)," ",b(d=>d.year,[s],"p0.year")],1,null),e("button",null,{class:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",onClick$:h("s_9lirksKinnQ",[a])},u(Me,{class:"h-5 w-5 text-slate-600 dark:text-slate-300",[t]:{class:t}},3,"Zl_2"),1,null)],1,null),e("div",null,{class:"grid grid-cols-7"},[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(d=>e("div",null,{class:"p-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 border-b border-r border-slate-100 dark:border-slate-700"},d,1,d)),l.value.calendarData.map((d,m)=>e("div",{class:`p-2 border-b border-r border-slate-100 dark:border-slate-700 min-h-[120px] transition-colors duration-300 ${o(d.day,d.payments)}`},null,[d.day!==null&&e("div",null,{class:"text-sm font-semibold text-slate-700 dark:text-slate-200"},_(d,"day"),1,"Zl_3"),e("div",null,{class:"mt-1 space-y-1"},d.payments.map(c=>e("div",{class:`text-xs p-1.5 rounded-lg shadow-sm ${c.status==="paid"?"bg-emerald-50 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-300":"bg-amber-50 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}`,title:`${c.professional_name}: ${K(c.amount,c.currency)}`},null,[e("div",null,{class:"font-bold truncate"},_(c,"professional_name"),1,null),e("div",null,{class:"font-medium"},K(c.amount,c.currency),1,null)],1,c.id)),1,null)],1,m))],1,null)],1,null)],1,null),1,"Zl_4")},Qs=B(f(Ks,"s_SibSP8O5TQA")),Zs=Object.freeze(Object.defineProperty({__proto__:null,default:Qs,usePaymentPlannerLoader:yl},Symbol.toStringTag,{value:"Module"})),Js=async l=>(await we(l),(await I(l).execute("SELECT id, name, role, email, phone, wallet FROM professionals ORDER BY name")).rows),_l=V(f(Js,"s_9ghkRguhPB4")),ea=async(l,s)=>{await we(s);const n=I(s),r=await Y(s);if(!r.isAuthenticated||!r.userId)return{success:!1,error:"Authentication required."};try{return await n.execute({sql:"INSERT INTO professionals (user_id, name, role, email, phone, wallet) VALUES (?, ?, ?, ?, ?, ?)",args:[r.userId,l.name??"",l.role??"",l.email??"",l.phone??"",l.wallet??""]}),{success:!0}}catch(a){return console.error("Failed to add professional:",a),{success:!1,error:"Failed to add professional."}}},la={name:E.string().min(3,"Name must be at least 3 characters."),role:E.string().min(3,"Role must be at least 3 characters."),email:E.string().email("Please enter a valid email.").optional().or(E.literal("")),phone:E.string().optional(),wallet:E.string().optional()},Tl=U(f(ea,"s_ewYr998vpGU"),X(f(la,"s_W0H0hD8VHsM"))),ta=({track:l})=>{const[s,n]=N();l(()=>n.value),s.value=n.value},sa=()=>{const[l,s,n]=N();if(!n.value){l.value=s.value;return}const r=n.value.toLowerCase();l.value=s.value.filter(a=>a.name.toLowerCase().includes(r)||a.role.toLowerCase().includes(r))},aa=()=>{var d;const[l,s,n,r,a,i,o]=N();(d=l.value)!=null&&d.success&&(i.value=!1,n.value="",a.value="",s.value="",r.value="",o.value="")},na=()=>{var v,C,R,w,L,M,P,j,y;F();const l=_l(),s=Tl(),n=g(""),r=g(!1),a=g(""),i=g(""),o=g(""),d=g(""),m=g(""),c=g(l.value);be(f(ta,"s_kB3Dg4UqAn0",[c,l]));const x=f(sa,"s_gzBsbP7L8is",[c,l,n]);return e("main",null,{class:"min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900"},[e("div",null,{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},[e("header",null,{class:"mb-8 bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-800 dark:to-slate-700 rounded-xl shadow-sm p-6"},e("div",null,{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},[e("div",null,{class:"flex items-center"},[u(J,{class:"h-8 w-8 text-teal-600 dark:text-teal-500 mr-3",[t]:{class:t}},3,"3n_0"),e("div",null,null,[e("h1",null,{class:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100"},"Professionals",3,null),e("p",null,{class:"text-slate-500 dark:text-slate-400 mt-1"},"Freelancer management",3,null)],3,null)],1,null),e("div",null,{class:"mt-4 sm:mt-0 flex flex-col sm:flex-row gap-3"},[e("button",null,{class:"inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all duration-200",onClick$:h("s_eoeiqcBEHfA",[r])},[u(oe,{class:"mr-2 h-4 w-4",[t]:{class:t}},3,"3n_1"),"Add Professional"],1,null),e("button",null,{class:"inline-flex items-center justify-center px-4 py-2 border border-slate-200 dark:border-slate-600 rounded-md shadow-sm text-sm font-medium text-slate-700 dark:text-slate-200 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all duration-200"},[u(Ze,{class:"mr-2 h-4 w-4",[t]:{class:t}},3,"3n_2"),"Export"],1,null)],1,null)],1,null),1,null),e("div",null,{class:"mb-6"},e("div",null,{class:"flex flex-col sm:flex-row gap-4 bg-white dark:bg-slate-800 rounded-lg shadow-sm p-4 border border-slate-100 dark:border-slate-700"},[e("div",null,{class:"relative flex-1"},[e("div",null,{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},u(Oe,{class:"h-5 w-5 text-slate-400 dark:text-slate-500",[t]:{class:t}},3,"3n_3"),1,null),e("input",null,{type:"text",value:b(A=>A.value,[n],"p0.value"),class:"block w-full pl-10 pr-3 py-2 border border-slate-200 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 placeholder-slate-400 shadow-sm hover:border-teal-400 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all duration-200",placeholder:"Search by name or role...",onInput$:h("s_pQ7saR2vT2Q",[n,x])},null,3,null)],1,null),e("div",null,{class:"flex-shrink-0"},e("button",null,{class:"inline-flex items-center px-4 py-2 border border-slate-200 dark:border-slate-600 rounded-md shadow-sm text-sm font-medium text-slate-700 dark:text-slate-200 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all duration-200"},[u(De,{class:"mr-2 h-4 w-4",[t]:{class:t}},3,"3n_4"),"Filter"],1,null),1,null)],1,null),1,null),e("div",null,{class:"bg-white dark:bg-slate-800 shadow-lg rounded-xl overflow-hidden border border-slate-200 dark:border-slate-700"},[e("div",null,{class:"overflow-x-auto"},e("table",null,{class:"min-w-full divide-y divide-slate-200 dark:divide-slate-700"},[e("thead",null,{class:"bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-800 dark:to-slate-700"},e("tr",null,null,[e("th",null,{scope:"col",class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Name",3,null),e("th",null,{scope:"col",class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Role",3,null),e("th",null,{scope:"col",class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Contact",3,null),e("th",null,{scope:"col",class:"px-6 py-4 text-right text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Actions",3,null)],3,null),3,null),e("tbody",null,{class:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700"},c.value.map(A=>e("tr",null,{class:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all duration-200 group"},[e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-100"},_(A,"name"),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300"},_(A,"role"),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300"},[e("div",null,null,_(A,"email"),1,null),e("div",null,null,_(A,"phone"),1,null)],1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},e("div",null,{class:"flex justify-end space-x-2"},[e("button",null,{class:"p-1.5 text-slate-600 dark:text-slate-400 hover:text-teal-600 hover:bg-teal-50 dark:hover:text-teal-400 dark:hover:bg-teal-900/20 rounded-full transition-all"},u(de,{class:"h-5 w-5",title:"View Details",[t]:{class:t,title:t}},3,"3n_5"),1,null),e("button",null,{class:"p-1.5 text-slate-600 dark:text-slate-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:text-blue-400 dark:hover:bg-blue-900/20 rounded-full transition-all"},u(Ue,{class:"h-5 w-5",title:"Edit",[t]:{class:t,title:t}},3,"3n_6"),1,null),e("button",null,{class:"p-1.5 text-slate-600 dark:text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:text-red-400 dark:hover:bg-red-900/20 rounded-full transition-all"},u(pe,{class:"h-5 w-5",title:"Delete",[t]:{class:t,title:t}},3,"3n_7"),1,null)],1,null),1,null)],1,A.id)),1,null)],1,null),1,null),c.value.length===0&&e("div",null,{class:"px-6 py-12 text-center"},[e("div",null,{class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700/50 mb-4"},u(J,{class:"w-8 h-8 text-slate-400 dark:text-slate-500",[t]:{class:t}},3,"3n_8"),1,null),e("p",null,{class:"text-slate-500 dark:text-slate-400 font-medium"},"No professionals found.",3,null),e("p",null,{class:"text-slate-400 dark:text-slate-500 mt-1 text-sm"},"Add a new professional to get started.",3,null)],1,"3n_9")],1,null),e("div",null,{class:"flex items-center justify-between mt-6 bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border border-slate-100 dark:border-slate-700"},e("div",null,{class:"text-sm text-slate-600 dark:text-slate-400"},["Showing ",e("span",null,{class:"font-medium text-teal-600 dark:text-teal-500"},b(A=>A.value.length,[c],"p0.value.length"),3,null)," of ",e("span",null,{class:"font-medium text-teal-600 dark:text-teal-500"},b(A=>A.value.length,[l],"p0.value.length"),3,null)," professionals"],3,null),3,null)],1,null),r.value&&e("div",null,{class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},e("div",null,{class:"flex items-end sm:items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},[e("div",null,{class:"fixed inset-0 bg-slate-700/70 dark:bg-slate-900/80 backdrop-blur-md transition-opacity","aria-hidden":"true",onClick$:h("s_TmJ39fMCzuM",[r])},null,3,null),e("div",null,{class:"inline-block align-bottom bg-white/95 dark:bg-slate-800/95 backdrop-blur-md rounded-xl text-left overflow-hidden shadow-2xl transform transition-all border border-slate-100/50 dark:border-slate-700/50 sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},u(O,{action:s,onSubmitCompleted$:f(aa,"s_9kOa6fjVAlU",[s,o,a,d,i,r,m]),children:[e("div",null,{class:"px-6 pt-5 pb-4 sm:p-6 sm:pb-4"},e("div",null,{class:"sm:flex sm:items-start"},e("div",null,{class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},[e("h3",null,{class:"text-xl leading-6 font-medium text-slate-800 dark:text-slate-100",id:"modal-title"},"Add New Professional",3,null),e("div",null,{class:"mt-4"},e("div",null,{class:"space-y-4"},[e("div",null,null,[e("label",null,{for:"name",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Full Name",3,null),e("input",null,{type:"text",name:"name",id:"name",value:a,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",required:!0,onInput$:h("s_GVdHcpX68tA",[a])},null,3,null),((C=(v=s.value)==null?void 0:v.fieldErrors)==null?void 0:C.name)&&e("p",null,{class:"text-red-500 text-sm mt-1"},b(A=>A.value.fieldErrors.name,[s],"p0.value.fieldErrors.name"),3,"3n_10")],1,null),e("div",null,null,[e("label",null,{for:"role",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Role",3,null),e("input",null,{type:"text",name:"role",id:"role",value:i,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",placeholder:"e.g., Frontend Developer",required:!0,onInput$:h("s_jAxO9x2uMs4",[i])},null,3,null),((w=(R=s.value)==null?void 0:R.fieldErrors)==null?void 0:w.role)&&e("p",null,{class:"text-red-500 text-sm mt-1"},b(A=>A.value.fieldErrors.role,[s],"p0.value.fieldErrors.role"),3,"3n_11")],1,null),e("div",null,null,[e("div",null,null,[e("label",null,{for:"wallet",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Wallet (optional)",3,null),e("input",null,{type:"text",name:"wallet",id:"wallet",value:m,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",placeholder:"Wallet address or ID",onInput$:h("s_lbSNTM5SAhM",[m])},null,3,null),((M=(L=s.value)==null?void 0:L.fieldErrors)==null?void 0:M.wallet)&&e("p",null,{class:"text-red-500 text-sm mt-1"},b(A=>A.value.fieldErrors.wallet,[s],"p0.value.fieldErrors.wallet"),3,"3n_12")],1,null),e("label",null,{for:"email",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Email",3,null),e("input",null,{type:"email",name:"email",id:"email",value:o,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",onInput$:h("s_DyU1DEK6eOo",[o])},null,3,null),((j=(P=s.value)==null?void 0:P.fieldErrors)==null?void 0:j.email)&&e("p",null,{class:"text-red-500 text-sm mt-1"},b(A=>A.value.fieldErrors.email,[s],"p0.value.fieldErrors.email"),3,"3n_13")],1,null),e("div",null,null,[e("label",null,{for:"phone",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Phone",3,null),e("input",null,{type:"tel",name:"phone",id:"phone",value:d,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",onInput$:h("s_NWWIOlSD3Rw",[d])},null,3,null)],3,null)],1,null),1,null)],1,null),1,null),1,null),e("div",null,{class:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-800 px-6 py-4 sm:flex sm:flex-row-reverse"},[e("button",null,{type:"submit",disabled:b(A=>A.isRunning,[s],"p0.isRunning"),class:"w-full inline-flex justify-center items-center rounded-lg border border-transparent shadow-sm px-5 py-2.5 bg-gradient-to-r from-teal-500 to-teal-600 text-base font-medium text-white hover:from-teal-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:ml-3 sm:w-auto sm:text-sm transition-all duration-200 disabled:opacity-50"},[s.isRunning?u(G,{class:"animate-spin h-5 w-5 mr-2",[t]:{class:t}},3,"3n_14"):u(ee,{class:"h-5 w-5 mr-2",[t]:{class:t}},3,"3n_15"),"Save Professional"],1,null),e("button",null,{type:"button",class:"mt-3 w-full inline-flex justify-center items-center rounded-lg border border-slate-200 dark:border-slate-600 shadow-sm px-5 py-2.5 bg-white dark:bg-slate-800 text-base font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-all duration-200",onClick$:h("s_NLbcS0Hh0oA",[r])},[u(le,{class:"h-5 w-5 mr-2",[t]:{class:t}},3,"3n_16"),"Cancel"],1,null)],1,null),((y=s.value)==null?void 0:y.success)===!1&&e("div",null,{class:"p-4 bg-red-100 text-red-800 rounded-b-lg"},[u(W,{class:"inline h-5 w-5 mr-2",[t]:{class:t}},3,"3n_17"),b(A=>A.value.error,[s],"p0.value.error")],1,"3n_18")],[t]:{action:t,onSubmitCompleted$:t}},1,"3n_19"),1,null)],1,null),1,"3n_20")],1,"3n_21")},ra=B(f(na,"s_ihBQ0teuNC8")),oa=Object.freeze(Object.defineProperty({__proto__:null,default:ra,useAddProfessional:Tl,useProfessionalsLoader:_l},Symbol.toStringTag,{value:"Module"})),ia=async l=>{const r=(await I(l).execute("SELECT * FROM app_settings WHERE id = 1")).rows[0];return{...r,notifications_enabled:!!r.notifications_enabled}},El=V(f(ia,"s_OCPwWYs74WM")),ua=async(l,s)=>{const n=await Y(s);if(!(n!=null&&n.is_admin))return{success:!1,error:"Unauthorized"};const r=I(s);try{return await r.execute({sql:`
          UPDATE app_settings SET 
            company_name = ?, company_email = ?, company_logo_url = ?, 
            invoice_prefix = ?, default_currency = ?, payment_methods = ?, 
            notifications_enabled = ?, theme = ?, updated_at = CURRENT_TIMESTAMP
          WHERE id = 1
        `,args:[l.company_name,l.company_email,l.company_logo_url||null,l.invoice_prefix,l.default_currency,JSON.stringify(l.payment_methods),l.notifications_enabled?1:0,l.theme]}),{success:!0}}catch(a){return console.error(a),{success:!1,error:"Failed to update settings."}}},da={company_name:E.string().min(1),company_email:E.string().email(),company_logo_url:E.string().url().optional().or(E.literal("")),invoice_prefix:E.string().max(10),default_currency:E.string(),payment_methods:E.array(E.string()),notifications_enabled:E.boolean(),theme:E.enum(["light","dark","system"])},Sl=U(f(ua,"s_XJ5eJM6wJS4"),X(f(da,"s_qOz9xR07XuY"))),ca=()=>{var R;F();const l=El(),s=Sl(),n=g(l.value.company_name),r=g(l.value.company_email),a=g(l.value.company_logo_url||""),i=g(l.value.invoice_prefix),o=g(l.value.default_currency),d=g(JSON.parse(l.value.payment_methods||"[]")),m=g(!!l.value.notifications_enabled),c=g(l.value.theme),x=[{value:"bank_transfer",label:"Bank Transfer"},{value:"paypal",label:"PayPal"},{value:"wise",label:"Wise"},{value:"crypto",label:"Crypto"}],v=[{value:"USD",label:"USD - US Dollar"},{value:"EUR",label:"EUR - Euro"}],C=[{value:"light",label:"Light"},{value:"dark",label:"Dark"},{value:"system",label:"System"}];return e("main",null,{class:"min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900"},e("div",null,{class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},[e("header",null,{class:"mb-8 bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-800 dark:to-slate-700 rounded-xl shadow-sm p-6"},e("div",null,{class:"flex items-center"},[u(tl,{class:"h-8 w-8 text-teal-600 dark:text-teal-500 mr-3",[t]:{class:t}},3,"cI_0"),e("div",null,null,[e("h1",null,{class:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100"},"Application Settings",3,null),e("p",null,{class:"text-slate-500 dark:text-slate-400 mt-1"},"Manage global application settings",3,null)],3,null)],1,null),1,null),u(O,{action:s,class:"space-y-8",children:[e("div",null,{class:"bg-white dark:bg-slate-800 shadow-lg rounded-xl border border-slate-200 dark:border-slate-700"},[e("div",null,{class:"p-6 border-b border-slate-200 dark:border-slate-700 flex items-center"},[u(Gl,{class:"h-6 w-6 text-teal-600 dark:text-teal-500 mr-3",[t]:{class:t}},3,"cI_1"),e("h2",null,{class:"text-lg font-semibold text-slate-800 dark:text-slate-100"},"Company Information",3,null)],1,null),e("div",null,{class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6"},[e("div",null,null,[e("label",null,{for:"company_name",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Company Name",3,null),e("input",null,{type:"text",name:"company_name",id:"company_name",value:n,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-2 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500",onInput$:h("s_ytQl2RUxF1g",[n])},null,3,null)],3,null),e("div",null,null,[e("label",null,{for:"company_email",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Company Email",3,null),e("input",null,{type:"email",name:"company_email",id:"company_email",value:r,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-2 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500",onInput$:h("s_4BpnU5fjv4o",[r])},null,3,null)],3,null),e("div",null,{class:"md:col-span-2"},[e("label",null,{for:"company_logo_url",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Logo URL",3,null),e("input",null,{type:"url",name:"company_logo_url",id:"company_logo_url",value:a,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-2 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500",onInput$:h("s_ENb9DsgOlVs",[a])},null,3,null)],3,null)],3,null)],1,null),e("div",null,{class:"bg-white dark:bg-slate-800 shadow-lg rounded-xl border border-slate-200 dark:border-slate-700"},[e("div",null,{class:"p-6 border-b border-slate-200 dark:border-slate-700 flex items-center"},[u(Z,{class:"h-6 w-6 text-teal-600 dark:text-teal-500 mr-3",[t]:{class:t}},3,"cI_2"),e("h2",null,{class:"text-lg font-semibold text-slate-800 dark:text-slate-100"},"Invoice Settings",3,null)],1,null),e("div",null,{class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6"},[e("div",null,null,[e("label",null,{for:"invoice_prefix",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Invoice Prefix",3,null),e("input",null,{type:"text",name:"invoice_prefix",id:"invoice_prefix",value:i,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-2 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500",onInput$:h("s_ca07GSOeg1o",[i])},null,3,null)],3,null),e("div",null,null,[e("label",null,{for:"default_currency",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Default Currency",3,null),e("select",null,{name:"default_currency",id:"default_currency",value:o,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-2 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500",onInput$:h("s_lLUvYLnkacs",[o])},v.map(w=>e("option",{value:_(w,"value")},null,w.label,1,w.value)),1,null)],1,null)],1,null)],1,null),e("div",null,{class:"bg-white dark:bg-slate-800 shadow-lg rounded-xl border border-slate-200 dark:border-slate-700"},[e("div",null,{class:"p-6 border-b border-slate-200 dark:border-slate-700 flex items-center"},[u(Xl,{class:"h-6 w-6 text-teal-600 dark:text-teal-500 mr-3",[t]:{class:t}},3,"cI_3"),e("h2",null,{class:"text-lg font-semibold text-slate-800 dark:text-slate-100"},"Payment Methods",3,null)],1,null),e("div",null,{class:"p-6 grid grid-cols-2 md:grid-cols-4 gap-4"},x.map(w=>e("div",null,{class:"flex items-center"},[e("input",{id:`payment-${w.value}`,value:_(w,"value"),checked:d.value.includes(w.value),onChange$:h("s_9IYanuJ7Uic",[w,d])},{type:"checkbox",name:"payment_methods",class:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-slate-300 dark:border-slate-600 rounded"},null,2,null),e("label",{for:`payment-${w.value}`},{class:"ml-2 text-sm text-slate-700 dark:text-slate-300"},_(w,"label"),1,null)],1,w.value)),1,null)],1,null),e("div",null,{class:"bg-white dark:bg-slate-800 shadow-lg rounded-xl border border-slate-200 dark:border-slate-700"},[e("div",null,{class:"p-6 border-b border-slate-200 dark:border-slate-700 flex items-center"},[u(Jl,{class:"h-6 w-6 text-teal-600 dark:text-teal-500 mr-3",[t]:{class:t}},3,"cI_4"),e("h2",null,{class:"text-lg font-semibold text-slate-800 dark:text-slate-100"},"Appearance & Notifications",3,null)],1,null),e("div",null,{class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6 items-center"},[e("div",null,null,[e("label",null,{for:"theme",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Theme",3,null),e("select",null,{name:"theme",id:"theme",value:c,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-2 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500",onInput$:h("s_6hiRG0tcDe4",[c])},C.map(w=>e("option",{value:_(w,"value")},null,w.label,1,w.value)),1,null)],1,null),e("div",null,{class:"flex items-center pt-6"},[e("input",null,{type:"checkbox",id:"notifications_enabled",name:"notifications_enabled",checked:m,class:"h-4 w-4 text-teal-600 focus:ring-teal-500 border-slate-300 dark:border-slate-600 rounded",onInput$:h("s_8iPCJdppKeA",[m])},null,3,null),e("label",null,{for:"notifications_enabled",class:"ml-2 text-sm font-medium text-slate-700 dark:text-slate-300"},"Enable Notifications",3,null)],3,null)],1,null)],1,null),e("div",null,{class:"flex justify-end items-center pt-4"},[((R=s.value)==null?void 0:R.success)===!1&&e("div",null,{class:"text-red-600 dark:text-red-400 mr-4 flex items-center"},[u(W,{class:"h-5 w-5 mr-2",[t]:{class:t}},3,"cI_5"),b(w=>w.value.error,[s],"p0.value.error")],1,"cI_6"),e("button",null,{type:"submit",disabled:b(w=>w.isRunning,[s],"p0.isRunning"),class:"inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-lg shadow-sm text-base font-medium text-white bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all duration-200 disabled:opacity-50"},[s.isRunning?u(G,{class:"animate-spin h-5 w-5 mr-2",[t]:{class:t}},3,"cI_7"):u(ee,{class:"h-5 w-5 mr-2",[t]:{class:t}},3,"cI_8"),"Save Settings"],1,null)],1,null)],[t]:{action:t,class:t}},1,"cI_9")],1,null),1,"cI_10")},ma=B(f(ca,"s_pkX8xUp3FVg")),pa=Object.freeze(Object.defineProperty({__proto__:null,default:ma,useSettingsLoader:El,useUpdateSettings:Sl},Symbol.toStringTag,{value:"Module"})),fa=async l=>{const s=I(l),n=new URL(l.request.url),r=n.searchParams.get("professional"),a=n.searchParams.get("month"),i=n.searchParams.get("year");let o=`
    SELECT 
      s.id, s.professional_id, p.name as professional_name, s.month, s.year, 
      s.total_amount, s.currency, s.status, s.payment_date
    FROM settlements s
    JOIN professionals p ON s.professional_id = p.id
  `;const d=[],m=[];r&&(m.push("s.professional_id = ?"),d.push(r)),a&&(m.push("s.month = ?"),d.push(a)),i&&(m.push("s.year = ?"),d.push(i)),m.length>0&&(o+=" WHERE "+m.join(" AND ")),o+=" ORDER BY s.year DESC, s.month DESC";const c=await s.execute({sql:o,args:d}),x=await s.execute("SELECT id, name FROM professionals ORDER BY name");return{settlements:c.rows.map(v=>({...v,total_amount:Number(v.total_amount)})),professionals:x.rows,filters:{professionalId:r,month:a,year:i}}},Ll=V(f(fa,"s_YeuiPGf0MkM")),xa=async(l,s)=>{const n=await Y(s);if(!n.isAuthenticated||!n.userId)return{success:!1,error:"Authentication required"};const r=I(s);try{return await r.execute({sql:"INSERT INTO settlements (professional_id, user_id, month, year, total_amount, currency, status) VALUES (?, ?, ?, ?, ?, ?, ?)",args:[l.professionalId,n.userId,l.month,l.year,l.totalAmount,l.currency,"pending"]}),{success:!0}}catch(a){return console.error(a),{success:!1,error:"Failed to create settlement."}}},ga={professionalId:E.coerce.number(),month:E.coerce.number().min(1).max(12),year:E.coerce.number().min(2e3).max(2100),totalAmount:E.coerce.number().positive(),currency:E.string().min(3)},Cl=U(f(xa,"s_igFdqUmxqns"),X(f(ga,"s_QEe4M0HM2F8"))),ha=async({id:l,status:s},n)=>{const r=I(n),a=s==="paid"?"pending":"paid",i=a==="paid"?new Date().toISOString().split("T")[0]:null;try{return await r.execute({sql:"UPDATE settlements SET status = ?, payment_date = ? WHERE id = ?",args:[String(a),i?String(i):null,String(l)]}),{success:!0}}catch{return{success:!1,error:"Failed to update status."}}},Rl=U(f(ha,"s_9x1ijvU6PpI")),ba=async({id:l},s)=>{const n=I(s);try{return await n.execute({sql:"DELETE FROM settlements WHERE id = ?",args:[String(l)]}),{success:!0}}catch{return{success:!1,error:"Failed to delete settlement."}}},Al=U(f(ba,"s_aH8dasVygFA")),he=[{value:"1",label:"January"},{value:"2",label:"February"},{value:"3",label:"March"},{value:"4",label:"April"},{value:"5",label:"May"},{value:"6",label:"June"},{value:"7",label:"July"},{value:"8",label:"August"},{value:"9",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],Se=()=>{const l=new Date().getFullYear(),s=[];for(let n=l-3;n<=l+1;n++)s.push({value:n.toString(),label:n.toString()});return s},va=()=>{const[l,s,n]=N(),r=new URL(window.location.href),a={professionalId:s.value,month:l.value,year:n.value};for(const[i,o]of Object.entries(a))o?r.searchParams.set(i,o):r.searchParams.delete(i);window.location.href=r.toString()},wa=()=>{var n;const[l,s]=N();(n=l.value)!=null&&n.success&&(s.value=!1)},ka=()=>{var P,j,y,A,z;F();const l=Ll(),s=Cl(),n=Rl(),r=Al(),a=g(!1),i=g(l.value.filters.professionalId||""),o=g(l.value.filters.month||""),d=g(l.value.filters.year||new Date().getFullYear().toString()),m=g(""),c=g((new Date().getMonth()+1).toString()),x=g(new Date().getFullYear().toString()),v=g(""),C=g("USD"),R=f(va,"s_JA9lAiG4rAg",[o,i,d]),w=l.value.settlements.reduce((p,H)=>p+H.total_amount,0),L=l.value.settlements.filter(p=>p.status==="pending").reduce((p,H)=>p+H.total_amount,0),M=p=>{var H;return((H=he.find(te=>te.value===String(p)))==null?void 0:H.label)||""};return e("main",null,{class:"min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900"},[e("div",null,{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},[e("header",null,{class:"mb-8 bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-800 dark:to-slate-700 rounded-xl shadow-sm p-6"},e("div",null,{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},[e("div",null,{class:"flex items-center"},[u(Z,{class:"h-8 w-8 text-teal-600 dark:text-teal-500 mr-3",[t]:{class:t}},3,"3q_0"),e("div",null,null,[e("h1",null,{class:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100"},"Settlements",3,null),e("p",null,{class:"text-slate-500 dark:text-slate-400 mt-1"},"Manage monthly payment settlements",3,null)],3,null)],1,null),e("button",null,{class:"mt-4 sm:mt-0 inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all duration-200",onClick$:h("s_gZqMXZRy0vc",[a])},[u(oe,{class:"mr-2 h-4 w-4",[t]:{class:t}},3,"3q_1"),"Add Settlement"],1,null)],1,null),1,null),e("div",null,{class:"mb-6 bg-white dark:bg-slate-800 rounded-lg shadow-sm p-4 border border-slate-100 dark:border-slate-700"},e("div",null,{class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4"},[e("div",null,null,[e("label",null,{for:"prof-filter",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Professional",3,null),e("select",null,{id:"prof-filter",value:i,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-2 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",onInput$:h("s_IBFxqRn4EYE",[i])},[e("option",null,{value:""},"All",3,null),l.value.professionals.map(p=>e("option",{value:_(p,"id")},null,p.name,1,p.id))],1,null)],1,null),e("div",null,null,[e("label",null,{for:"month-filter",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Month",3,null),e("select",null,{id:"month-filter",value:o,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-2 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",onInput$:h("s_tvSnPot6oxg",[o])},[e("option",null,{value:""},"All",3,null),he.map(p=>e("option",{value:_(p,"value")},null,p.label,1,p.value))],1,null)],1,null),e("div",null,null,[e("label",null,{for:"year-filter",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Year",3,null),e("select",null,{id:"year-filter",value:d,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-2 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",onInput$:h("s_bnOLSIFntok",[d])},[e("option",null,{value:""},"All",3,null),Se().map(p=>e("option",{value:_(p,"value")},null,p.label,1,p.value))],1,null)],1,null),e("div",null,{class:"self-end"},e("button",null,{class:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500",onClick$:R},[u(De,{class:"mr-2 h-4 w-4",[t]:{class:t}},3,"3q_2"),"Apply"],1,null),1,null)],1,null),1,null),e("div",null,{class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},[e("div",null,{class:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-5 border border-slate-100 dark:border-slate-700"},[e("h3",null,{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Total Settlements",3,null),e("p",null,{class:"text-2xl font-bold text-slate-800 dark:text-slate-200"},b(p=>p.value.settlements.length,[l],"p0.value.settlements.length"),3,null)],3,null),e("div",null,{class:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-5 border border-slate-100 dark:border-slate-700"},[e("h3",null,{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Pending Amount",3,null),e("p",null,{class:"text-2xl font-bold text-amber-600 dark:text-amber-400"},K(L,"USD"),1,null)],1,null),e("div",null,{class:"bg-white dark:bg-slate-800 rounded-lg shadow-sm p-5 border border-slate-100 dark:border-slate-700"},[e("h3",null,{class:"text-sm font-medium text-slate-500 dark:text-slate-400"},"Total Amount",3,null),e("p",null,{class:"text-2xl font-bold text-emerald-600 dark:text-emerald-400"},K(w,"USD"),1,null)],1,null)],1,null),e("div",null,{class:"bg-white dark:bg-slate-800 shadow-lg rounded-xl overflow-hidden border border-slate-200 dark:border-slate-700"},[e("div",null,{class:"overflow-x-auto"},e("table",null,{class:"min-w-full divide-y divide-slate-200 dark:divide-slate-700"},[e("thead",null,{class:"bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-800 dark:to-slate-700"},e("tr",null,null,[e("th",null,{class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Professional",3,null),e("th",null,{class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Period",3,null),e("th",null,{class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Amount",3,null),e("th",null,{class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Status",3,null),e("th",null,{class:"px-6 py-4 text-right text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Actions",3,null)],3,null),3,null),e("tbody",null,{class:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700"},l.value.settlements.map(p=>F(e("tr",null,{class:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all duration-200 group"},[e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-100"},_(p,"professional_name"),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300"},[M(p.month)," ",_(p,"year")],1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm text-slate-800 dark:text-slate-100 font-semibold"},K(p.total_amount,p.currency),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap"},e("span",{class:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${p.status==="paid"?"bg-gradient-to-r from-emerald-50 to-emerald-100 text-emerald-700 dark:from-emerald-900/30 dark:to-emerald-800/30 dark:text-emerald-400":"bg-gradient-to-r from-amber-50 to-amber-100 text-amber-700 dark:from-amber-900/30 dark:to-amber-800/30 dark:text-amber-400"}`},null,p.status.charAt(0).toUpperCase()+p.status.slice(1),1,null),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},e("div",null,{class:"flex justify-end space-x-2"},[u(O,{action:n,children:[e("input",{value:_(p,"id")},{type:"hidden",name:"id"},null,3,null),e("input",{value:_(p,"status")},{type:"hidden",name:"status"},null,3,null),e("button",{title:p.status==="paid"?"Mark as Pending":"Mark as Paid"},{type:"submit",class:"p-1.5 text-slate-600 dark:text-slate-400 hover:text-teal-600 hover:bg-teal-50 dark:hover:text-teal-400 dark:hover:bg-teal-900/20 rounded-full transition-all"},p.status==="paid"?u(me,{class:"h-5 w-5",[t]:{class:t}},3,"3q_3"):u(ue,{class:"h-5 w-5",[t]:{class:t}},3,"3q_4"),1,null)],[t]:{action:t}},1,"3q_5"),u(O,{action:r,children:[e("input",{value:_(p,"id")},{type:"hidden",name:"id"},null,3,null),e("button",null,{type:"submit",class:"p-1.5 text-slate-600 dark:text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:text-red-400 dark:hover:bg-red-900/20 rounded-full transition-all",title:"Delete Settlement"},u(pe,{class:"h-5 w-5",[t]:{class:t}},3,"3q_6"),1,null)],[t]:{action:t}},1,"3q_7")],1,null),1,null)],1,p.id))),1,null)],1,null),1,null),l.value.settlements.length===0&&e("div",null,{class:"px-6 py-12 text-center"},e("p",null,{class:"text-slate-500 dark:text-slate-400 font-medium"},"No settlements found for the selected filters.",3,null),3,"3q_8")],1,null)],1,null),a.value&&e("div",null,{class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},e("div",null,{class:"flex items-end sm:items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},[e("div",null,{class:"fixed inset-0 bg-slate-700/70 dark:bg-slate-900/80 backdrop-blur-md transition-opacity","aria-hidden":"true",onClick$:h("s_kJCDOTtfrKA",[a])},null,3,null),e("div",null,{class:"inline-block align-bottom bg-white/95 dark:bg-slate-800/95 backdrop-blur-md rounded-xl text-left overflow-hidden shadow-2xl transform transition-all border border-slate-100/50 dark:border-slate-700/50 sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},u(O,{action:s,onSubmitCompleted$:f(wa,"s_rZyEMBK6ZTM",[s,a]),children:[e("div",null,{class:"px-6 pt-5 pb-4 sm:p-6 sm:pb-4"},[e("h3",null,{class:"text-xl leading-6 font-medium text-slate-800 dark:text-slate-100",id:"modal-title"},"Add New Settlement",3,null),e("div",null,{class:"mt-4 space-y-4"},[e("div",null,null,[e("label",null,{for:"professionalId",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Professional",3,null),e("select",null,{name:"professionalId",id:"professionalId",value:m,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",onInput$:h("s_ZRcDvRBBLdw",[m])},[e("option",null,{value:""},"Select a professional",3,null),l.value.professionals.map(p=>e("option",{value:_(p,"id")},null,p.name,1,p.id))],1,null),((j=(P=s.value)==null?void 0:P.fieldErrors)==null?void 0:j.professionalId)&&e("p",null,{class:"text-red-500 text-sm mt-1"},b(p=>p.value.fieldErrors.professionalId,[s],"p0.value.fieldErrors.professionalId"),3,"3q_9")],1,null),e("div",null,{class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},[e("div",null,null,[e("label",null,{for:"month",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Month",3,null),e("select",null,{name:"month",id:"month",value:c,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",onInput$:h("s_8FQlk1mPi4U",[c])},he.map(p=>e("option",{value:_(p,"value")},null,p.label,1,p.value)),1,null)],1,null),e("div",null,null,[e("label",null,{for:"year",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Year",3,null),e("select",null,{name:"year",id:"year",value:x,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",onInput$:h("s_hRuOxT6OR0M",[x])},Se().map(p=>e("option",{value:_(p,"value")},null,p.label,1,p.value)),1,null)],1,null)],1,null),e("div",null,{class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},[e("div",null,null,[e("label",null,{for:"totalAmount",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Total Amount",3,null),e("input",null,{type:"number",name:"totalAmount",id:"totalAmount",value:v,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",onInput$:h("s_qsYP13BcNis",[v])},null,3,null),((A=(y=s.value)==null?void 0:y.fieldErrors)==null?void 0:A.totalAmount)&&e("p",null,{class:"text-red-500 text-sm mt-1"},b(p=>p.value.fieldErrors.totalAmount,[s],"p0.value.fieldErrors.totalAmount"),3,"3q_10")],1,null),e("div",null,null,[e("label",null,{for:"currency",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Currency",3,null),e("select",null,{name:"currency",id:"currency",value:C,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm transition-all",onInput$:h("s_kPyktfRIJ0U",[C])},[e("option",null,null,"USD",3,null),e("option",null,null,"EUR",3,null)],3,null)],3,null)],1,null)],1,null)],1,null),e("div",null,{class:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-800 px-6 py-4 sm:flex sm:flex-row-reverse"},[e("button",null,{type:"submit",disabled:b(p=>p.isRunning,[s],"p0.isRunning"),class:"w-full inline-flex justify-center items-center rounded-lg border border-transparent shadow-sm px-5 py-2.5 bg-gradient-to-r from-teal-500 to-teal-600 text-base font-medium text-white hover:from-teal-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:ml-3 sm:w-auto sm:text-sm transition-all duration-200 disabled:opacity-50"},[s.isRunning?u(G,{class:"animate-spin h-5 w-5 mr-2",[t]:{class:t}},3,"3q_11"):u(ee,{class:"h-5 w-5 mr-2",[t]:{class:t}},3,"3q_12"),"Save Settlement"],1,null),e("button",null,{type:"button",class:"mt-3 w-full inline-flex justify-center items-center rounded-lg border border-slate-200 dark:border-slate-600 shadow-sm px-5 py-2.5 bg-white dark:bg-slate-800 text-base font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-all duration-200",onClick$:h("s_PbMP0mxGb8s",[a])},[u(le,{class:"h-5 w-5 mr-2",[t]:{class:t}},3,"3q_13"),"Cancel"],1,null)],1,null),((z=s.value)==null?void 0:z.success)===!1&&e("div",null,{class:"p-4 bg-red-100 text-red-800 rounded-b-lg"},[u(W,{class:"inline h-5 w-5 mr-2",[t]:{class:t}},3,"3q_14"),b(p=>p.value.error,[s],"p0.value.error")],1,"3q_15")],[t]:{action:t,onSubmitCompleted$:t}},1,"3q_16"),1,null)],1,null),1,"3q_17")],1,"3q_18")},ya=B(f(ka,"s_0ONN1Cu1fDg")),_a=Object.freeze(Object.defineProperty({__proto__:null,_auto_getYears:Se,_auto_months:he,default:ya,useAddSettlement:Cl,useDeleteSettlement:Al,useSettlementsLoader:Ll,useUpdateSettlementStatus:Rl},Symbol.toStringTag,{value:"Module"})),Ta=async l=>{const s=I(l);try{return(await s.execute("SELECT id, username, name, role, email, active FROM users ORDER BY name ASC")).rows.map(r=>({...r,active:!!r.active}))}catch(n){return console.error("Error loading users:",n),[]}},Nl=V(f(Ta,"s_iX0RZbkDTAw")),Ea=async(l,s)=>{var x;const n=await Y(s);if(!n.isAuthenticated||!n.is_admin)return{success:!1,error:"Unauthorized"};const r=I(s),{id:a,username:i,name:o,role:d,email:m,password:c}=l;try{if(a){const v=[{key:"username",value:i},{key:"name",value:o},{key:"role",value:d},{key:"email",value:m}];c&&v.push({key:"password_hash",value:c});const C=v.map(w=>`${w.key} = ?`).join(", "),R=v.map(w=>w.value);R.push(String(a)),await r.execute({sql:`UPDATE users SET ${C} WHERE id = ?`,args:R})}else{const v=c;await r.execute({sql:"INSERT INTO users (username, name, role, email, password_hash, active) VALUES (?, ?, ?, ?, ?, ?)",args:[i??"",o??"",d??"viewer",m??"",v??"",!0]})}return{success:!0}}catch(v){return(x=v.message)!=null&&x.includes("UNIQUE constraint failed: users.username")?{success:!1,error:"Username already exists."}:(console.error(v),{success:!1,error:"Failed to save user."})}},Sa={id:E.coerce.number().optional(),username:E.string().min(3,"Username must be at least 3 characters."),name:E.string().min(2,"Name is required."),role:E.enum(["admin","manager","viewer"]),email:E.string().email("Invalid email address."),password:E.string().min(8,"Password must be at least 8 characters.").optional().or(E.literal(""))},Il=U(f(Ea,"s_a0o72IlKDPU"),X(f(Sa,"s_oYjGP9s7ZYM"))),La=async({id:l,active:s},n)=>{const r=await Y(n);if(!(r!=null&&r.is_admin))return{success:!1,error:"Unauthorized"};const a=I(n);try{return await a.execute({sql:"UPDATE users SET active = ? WHERE id = ?",args:[!s,String(l)]}),{success:!0}}catch{return{success:!1,error:"Failed to update status."}}},Ml=U(f(La,"s_6EomhBuNxNI")),Ca=async({id:l},s)=>{const n=await Y(s);if(!(n!=null&&n.is_admin))return{success:!1,error:"Unauthorized"};const r=I(s);try{return await r.execute({sql:"DELETE FROM users WHERE id = ?",args:[String(l)]}),{success:!0}}catch{return{success:!1,error:"Failed to delete user."}}},Dl=U(f(Ca,"s_1r9Y6zzr2R0")),Ra=l=>{const[s,n,r,a,i,o,d]=N();l?(n.value=l.id,r.value=l.name,o.value=l.username,s.value=l.email,i.value=l.role,a.value=""):(n.value=void 0,r.value="",o.value="",s.value="",i.value="viewer",a.value=""),d.value=!0},Aa=()=>{var n;const[l,s]=N();(n=l.value)!=null&&n.success&&(s.value=!1)},Na=()=>{var R,w,L,M,P,j,y,A,z;F();const l=Nl(),s=Il(),n=Ml(),r=Dl(),a=g(!1),i=g(void 0),o=g(""),d=g(""),m=g(""),c=g("viewer"),x=g(""),v=f(Ra,"s_22z0CwgGRjQ",[m,i,o,x,c,d,a]),C=[{value:"admin",label:"Administrator"},{value:"manager",label:"Manager"},{value:"viewer",label:"Viewer"}];return e("main",null,{class:"min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900"},[e("div",null,{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},[e("header",null,{class:"mb-8 bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-800 dark:to-slate-700 rounded-xl shadow-sm p-6"},e("div",null,{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},[e("div",null,{class:"flex items-center"},[u(J,{class:"h-8 w-8 text-teal-600 dark:text-teal-500 mr-3",[t]:{class:t}},3,"pv_0"),e("div",null,null,[e("h1",null,{class:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-slate-100"},"User Administration",3,null),e("p",null,{class:"text-slate-500 dark:text-slate-400 mt-1"},"Manage users and their permissions",3,null)],3,null)],1,null),e("button",null,{class:"mt-4 sm:mt-0 inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 transition-all duration-200",onClick$:h("s_97298IyYAwg",[v])},[u(oe,{class:"mr-2 h-4 w-4",[t]:{class:t}},3,"pv_1"),"Add User"],1,null)],1,null),1,null),e("div",null,{class:"bg-white dark:bg-slate-800 shadow-lg rounded-xl overflow-hidden border border-slate-200 dark:border-slate-700"},e("div",null,{class:"overflow-x-auto"},e("table",null,{class:"min-w-full divide-y divide-slate-200 dark:divide-slate-700"},[e("thead",null,{class:"bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-800 dark:to-slate-700"},e("tr",null,null,[e("th",null,{class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"User",3,null),e("th",null,{class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Role",3,null),e("th",null,{class:"px-6 py-4 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Status",3,null),e("th",null,{class:"px-6 py-4 text-right text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider"},"Actions",3,null)],3,null),3,null),e("tbody",null,{class:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700"},l.value.map(p=>F(e("tr",null,{class:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all duration-200 group"},[e("td",null,{class:"px-6 py-4 whitespace-nowrap"},[e("div",null,{class:"text-sm font-medium text-slate-800 dark:text-slate-100"},_(p,"name"),1,null),e("div",null,{class:"text-sm text-slate-500 dark:text-slate-400"},_(p,"email"),1,null)],1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300"},_(p,"role"),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap"},e("span",{class:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${p.active?"bg-gradient-to-r from-emerald-50 to-emerald-100 text-emerald-700 dark:from-emerald-900/30 dark:to-emerald-800/30 dark:text-emerald-400":"bg-gradient-to-r from-slate-100 to-slate-200 text-slate-600 dark:from-slate-700 dark:to-slate-600 dark:text-slate-300"}`},null,p.active?"Active":"Inactive",1,null),1,null),e("td",null,{class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},e("div",null,{class:"flex justify-end space-x-2"},[e("button",{onClick$:h("s_O4CvBodU74s",[v,p])},{class:"p-1.5 text-slate-600 dark:text-slate-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:text-blue-400 dark:hover:bg-blue-900/20 rounded-full transition-all",title:"Edit User"},u(Ue,{class:"h-5 w-5",[t]:{class:t}},3,"pv_2"),0,null),u(O,{action:n,children:[e("input",{value:_(p,"id")},{type:"hidden",name:"id"},null,3,null),e("input",{value:p.active?"true":"false"},{type:"hidden",name:"active"},null,3,null),e("button",{class:`p-1.5 rounded-full transition-all ${p.active?"text-slate-600 dark:text-slate-400 hover:text-yellow-600 hover:bg-yellow-50 dark:hover:text-yellow-400 dark:hover:bg-yellow-900/20":"text-slate-600 dark:text-slate-400 hover:text-green-600 hover:bg-green-50 dark:hover:text-green-400 dark:hover:bg-green-900/20"}`,title:p.active?"Deactivate":"Activate"},{type:"submit"},p.active?u(st,{class:"h-5 w-5",[t]:{class:t}},3,"pv_3"):u(tt,{class:"h-5 w-5",[t]:{class:t}},3,"pv_4"),1,null)],[t]:{action:t}},1,"pv_5"),u(O,{action:r,children:[e("input",{value:_(p,"id")},{type:"hidden",name:"id"},null,3,null),e("button",null,{type:"submit",class:"p-1.5 text-slate-600 dark:text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:text-red-400 dark:hover:bg-red-900/20 rounded-full transition-all",title:"Delete User"},u(pe,{class:"h-5 w-5",[t]:{class:t}},3,"pv_6"),1,null)],[t]:{action:t}},1,"pv_7")],1,null),1,null)],1,p.id))),1,null)],1,null),1,null),1,null)],1,null),a.value&&e("div",null,{class:"fixed inset-0 z-50 overflow-y-auto"},e("div",null,{class:"flex items-end sm:items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},[e("div",null,{class:"fixed inset-0 bg-slate-700/70 dark:bg-slate-900/80 backdrop-blur-md transition-opacity","aria-hidden":"true",onClick$:h("s_0VJKs3Cj51k",[a])},null,3,null),e("div",null,{class:"inline-block align-bottom bg-white/95 dark:bg-slate-800/95 backdrop-blur-md rounded-xl text-left overflow-hidden shadow-2xl transform transition-all border border-slate-100/50 dark:border-slate-700/50 sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},u(O,{action:s,onSubmitCompleted$:f(Aa,"s_uctbYNgi4OY",[s,a]),children:[e("div",null,{class:"px-6 pt-5 pb-4 sm:p-6 sm:pb-4"},[e("h3",null,{class:"text-xl leading-6 font-medium text-slate-800 dark:text-slate-100"},[b(p=>p.value?"Edit":"Add",[i],'p0.value?"Edit":"Add"')," User"],3,null),e("input",null,{type:"hidden",name:"id",value:b(p=>p.value,[i],"p0.value")},null,3,null),e("div",null,{class:"mt-4 space-y-4"},[e("div",null,{class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[e("div",null,null,[e("label",null,{for:"name",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Full Name",3,null),e("input",null,{type:"text",name:"name",id:"name",value:o,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",onInput$:h("s_oN0ORdmSBQk",[o])},null,3,null),((w=(R=s.value)==null?void 0:R.fieldErrors)==null?void 0:w.name)&&e("p",null,{class:"text-red-500 text-sm mt-1"},b(p=>p.value.fieldErrors.name,[s],"p0.value.fieldErrors.name"),3,"pv_8")],1,null),e("div",null,null,[e("label",null,{for:"username",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Username",3,null),e("input",null,{type:"text",name:"username",id:"username",value:d,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",onInput$:h("s_s0IUkW8ve40",[d])},null,3,null),((M=(L=s.value)==null?void 0:L.fieldErrors)==null?void 0:M.username)&&e("p",null,{class:"text-red-500 text-sm mt-1"},b(p=>p.value.fieldErrors.username,[s],"p0.value.fieldErrors.username"),3,"pv_9")],1,null)],1,null),e("div",null,null,[e("label",null,{for:"email",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Email",3,null),e("input",null,{type:"email",name:"email",id:"email",value:m,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",onInput$:h("s_n0pakWINAc8",[m])},null,3,null),((j=(P=s.value)==null?void 0:P.fieldErrors)==null?void 0:j.email)&&e("p",null,{class:"text-red-500 text-sm mt-1"},b(p=>p.value.fieldErrors.email,[s],"p0.value.fieldErrors.email"),3,"pv_10")],1,null),e("div",null,{class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},[e("div",null,null,[e("label",null,{for:"role",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Role",3,null),e("select",null,{name:"role",id:"role",value:c,class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",onInput$:h("s_dia70tVBw94",[c])},C.map(p=>e("option",{value:_(p,"value")},null,p.label,1,p.value)),1,null)],1,null),e("div",null,null,[e("label",null,{for:"password",class:"block text-sm font-medium text-slate-700 dark:text-slate-300"},"Password",3,null),e("input",null,{type:"password",name:"password",id:"password",value:x,placeholder:b(p=>p.value?"Leave blank to keep current":"",[i],'p0.value?"Leave blank to keep current":""'),class:"mt-1 block w-full border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm py-3 px-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm",onInput$:h("s_Xj20SVtNgHs",[x])},null,3,null),((A=(y=s.value)==null?void 0:y.fieldErrors)==null?void 0:A.password)&&e("p",null,{class:"text-red-500 text-sm mt-1"},b(p=>p.value.fieldErrors.password,[s],"p0.value.fieldErrors.password"),3,"pv_11")],1,null)],1,null)],1,null)],1,null),e("div",null,{class:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-800 px-6 py-4 sm:flex sm:flex-row-reverse"},[e("button",null,{type:"submit",disabled:b(p=>p.isRunning,[s],"p0.isRunning"),class:"w-full inline-flex justify-center items-center rounded-lg border border-transparent shadow-sm px-5 py-2.5 bg-gradient-to-r from-teal-500 to-teal-600 text-base font-medium text-white hover:from-teal-600 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:ml-3 sm:w-auto sm:text-sm transition-all duration-200 disabled:opacity-50"},[s.isRunning?u(G,{class:"animate-spin h-5 w-5 mr-2",[t]:{class:t}},3,"pv_12"):u(ee,{class:"h-5 w-5 mr-2",[t]:{class:t}},3,"pv_13"),"Save User"],1,null),e("button",null,{type:"button",class:"mt-3 w-full inline-flex justify-center items-center rounded-lg border border-slate-200 dark:border-slate-600 shadow-sm px-5 py-2.5 bg-white dark:bg-slate-800 text-base font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-all duration-200",onClick$:h("s_iD3Bt7nAzVc",[a])},[u(le,{class:"h-5 w-5 mr-2",[t]:{class:t}},3,"pv_14"),"Cancel"],1,null)],1,null),((z=s.value)==null?void 0:z.success)===!1&&e("div",null,{class:"p-4 bg-red-100 text-red-800 rounded-b-lg"},[u(W,{class:"inline h-5 w-5 mr-2",[t]:{class:t}},3,"pv_15"),b(p=>p.value.error,[s],"p0.value.error")],1,"pv_16")],[t]:{action:t,onSubmitCompleted$:t}},1,"pv_17"),1,null)],1,null),1,"pv_18")],1,"pv_19")},Ia=B(f(Na,"s_bCkyk2JlVAo")),Ma=Object.freeze(Object.defineProperty({__proto__:null,default:Ia,useDeleteUser:Dl,useSaveUser:Il,useToggleUserStatus:Ml,useUsersLoader:Nl},Symbol.toStringTag,{value:"Module"})),Da=[],Ye=()=>Yl,$=()=>ht,Ua=[["/",[$,()=>yt],"/",["q-CUPuVgT7.js","q-CN_EBTj1.js"]],["api/contracts/view/[fileName]/",[$,()=>Et],"/api/contracts/view/[fileName]/",["q-CUPuVgT7.js"]],["api/invoices/view/[fileName]/",[$,()=>Ct],"/api/invoices/view/[fileName]/",["q-CUPuVgT7.js"]],["api/upload-contract/",[$,()=>At],"/api/upload-contract/",["q-CUPuVgT7.js"]],["api/upload-image/",[$,()=>It],"/api/upload-image/",["q-CUPuVgT7.js"]],["api/upload-invoice/",[$,()=>Dt],"/api/upload-invoice/",["q-CUPuVgT7.js"]],["auth/logout/",[$,Ye,()=>Ft],"/auth/logout/",["q-CUPuVgT7.js","q-Cy6toAav.js","q-BUSnPOqL.js"]],["auth/",[$,Ye,()=>Qt],"/auth/",["q-CUPuVgT7.js","q-Cy6toAav.js","q-Bb_pn_bf.js"]],["contracts/",[$,()=>us],"/contracts/",["q-CUPuVgT7.js","q-W9mej4uj.js"]],["invoices/",[$,()=>Ts],"/invoices/",["q-CUPuVgT7.js","q-C32aPe6U.js"]],["planner-auto/",[$,()=>Gs],"/planner-auto/",["q-CUPuVgT7.js","q-CqVJRhY2.js"]],["planner/",[$,()=>Zs],"/planner/",["q-CUPuVgT7.js","q-CTAHd-2h.js"]],["professionals/",[$,()=>oa],"/professionals/",["q-CUPuVgT7.js","q-CuH7dbWE.js"]],["settings/",[$,()=>pa],"/settings/",["q-CUPuVgT7.js","q-TQLi6FDm.js"]],["settlements/",[$,()=>_a],"/settlements/",["q-CUPuVgT7.js","q-YRA0fviz.js"]],["user-admin/",[$,()=>Ma],"/user-admin/",["q-CUPuVgT7.js","q-BV_83bkt.js"]]],Oa=[],Pa=!0,ja="/",Fa=!0,Qa={routes:Ua,serverPlugins:Da,menus:Oa,trailingSlash:Pa,basePathname:ja,cacheModules:Fa};export{ja as basePathname,Fa as cacheModules,Qa as default,Oa as menus,Ua as routes,Da as serverPlugins,Pa as trailingSlash};
